!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("domain"),require("events")):"function"==typeof define&&define.amd?define(["domain","events"],e):(t=t||self,function(){var r=t["cnfapi-miniprogram"],n=t["cnfapi-miniprogram"]=e(t.domain$1,t.EventEmitter);n.noConflict=function(){return t["cnfapi-miniprogram"]=r,n}}())}(this,function(t,e){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var u=a(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(n){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=r=function(t){return e(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},r(n)}t.exports=r});var c=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var s=function(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?c(t):e},f=a(function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e}),l=a(function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e});var p=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)};var h=function(){this.__data__=[],this.size=0};var d=function(t,e){return t===e||t!=t&&e!=e};var y=function(t,e){for(var r=t.length;r--;)if(d(t[r][0],e))return r;return-1},v=Array.prototype.splice;var g=function(t){var e=this.__data__,r=y(e,t);return!(r<0||(r==e.length-1?e.pop():v.call(e,r,1),--this.size,0))};var m=function(t){var e=this.__data__,r=y(e,t);return r<0?void 0:e[r][1]};var b=function(t){return y(this.__data__,t)>-1};var w=function(t,e){var r=this.__data__,n=y(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function _(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_.prototype.clear=h,_.prototype.delete=g,_.prototype.get=m,_.prototype.has=b,_.prototype.set=w;var j=_;var O=function(){this.__data__=new j,this.size=0};var S=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var E=function(t){return this.__data__.get(t)};var k=function(t){return this.__data__.has(t)},C="object"==typeof i&&i&&i.Object===Object&&i,x="object"==typeof self&&self&&self.Object===Object&&self,T=C||x||Function("return this")(),N=T.Symbol,A=Object.prototype,P=A.hasOwnProperty,q=A.toString,R=N?N.toStringTag:void 0;var F=function(t){var e=P.call(t,R),r=t[R];try{t[R]=void 0;var n=!0}catch(t){}var o=q.call(t);return n&&(e?t[R]=r:delete t[R]),o},L=Object.prototype.toString;var z=function(t){return L.call(t)},I="[object Null]",M="[object Undefined]",U=N?N.toStringTag:void 0;var D=function(t){return null==t?void 0===t?M:I:U&&U in Object(t)?F(t):z(t)};var J=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},$="[object AsyncFunction]",G="[object Function]",H="[object GeneratorFunction]",B="[object Proxy]";var Z,K=function(t){if(!J(t))return!1;var e=D(t);return e==G||e==H||e==$||e==B},V=T["__core-js_shared__"],W=(Z=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var Q=function(t){return!!W&&W in t},X=Function.prototype.toString;var Y=function(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""},tt=/^\[object .+?Constructor\]$/,et=Function.prototype,rt=Object.prototype,nt=et.toString,ot=rt.hasOwnProperty,it=RegExp("^"+nt.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var at=function(t){return!(!J(t)||Q(t))&&(K(t)?it:tt).test(Y(t))};var ut=function(t,e){return null==t?void 0:t[e]};var ct=function(t,e){var r=ut(t,e);return at(r)?r:void 0},st=ct(T,"Map"),ft=ct(Object,"create");var lt=function(){this.__data__=ft?ft(null):{},this.size=0};var pt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ht="__lodash_hash_undefined__",dt=Object.prototype.hasOwnProperty;var yt=function(t){var e=this.__data__;if(ft){var r=e[t];return r===ht?void 0:r}return dt.call(e,t)?e[t]:void 0},vt=Object.prototype.hasOwnProperty;var gt=function(t){var e=this.__data__;return ft?void 0!==e[t]:vt.call(e,t)},mt="__lodash_hash_undefined__";var bt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ft&&void 0===e?mt:e,this};function wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}wt.prototype.clear=lt,wt.prototype.delete=pt,wt.prototype.get=yt,wt.prototype.has=gt,wt.prototype.set=bt;var _t=wt;var jt=function(){this.size=0,this.__data__={hash:new _t,map:new(st||j),string:new _t}};var Ot=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var St=function(t,e){var r=t.__data__;return Ot(e)?r["string"==typeof e?"string":"hash"]:r.map};var Et=function(t){var e=St(this,t).delete(t);return this.size-=e?1:0,e};var kt=function(t){return St(this,t).get(t)};var Ct=function(t){return St(this,t).has(t)};var xt=function(t,e){var r=St(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Tt.prototype.clear=jt,Tt.prototype.delete=Et,Tt.prototype.get=kt,Tt.prototype.has=Ct,Tt.prototype.set=xt;var Nt=Tt,At=200;var Pt=function(t,e){var r=this.__data__;if(r instanceof j){var n=r.__data__;if(!st||n.length<At-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Nt(n)}return r.set(t,e),this.size=r.size,this};function qt(t){var e=this.__data__=new j(t);this.size=e.size}qt.prototype.clear=O,qt.prototype.delete=S,qt.prototype.get=E,qt.prototype.has=k,qt.prototype.set=Pt;var Rt=qt,Ft=function(){try{var t=ct(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Lt=function(t,e,r){"__proto__"==e&&Ft?Ft(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var zt=function(t,e,r){(void 0===r||d(t[e],r))&&(void 0!==r||e in t)||Lt(t,e,r)};var It=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),u=a.length;u--;){var c=a[t?u:++o];if(!1===r(i[c],c,i))break}return e}}(),Mt=a(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?T.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}),Ut=T.Uint8Array;var Dt=function(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e};var Jt=function(t,e){var r=e?Dt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var $t=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},Gt=Object.create,Ht=function(){function t(){}return function(e){if(!J(e))return{};if(Gt)return Gt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Bt=function(t,e){return function(r){return t(e(r))}},Zt=Bt(Object.getPrototypeOf,Object),Kt=Object.prototype;var Vt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Kt)};var Wt=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:Ht(Zt(t))};var Qt=function(t){return null!=t&&"object"==typeof t},Xt="[object Arguments]";var Yt=function(t){return Qt(t)&&D(t)==Xt},te=Object.prototype,ee=te.hasOwnProperty,re=te.propertyIsEnumerable,ne=Yt(function(){return arguments}())?Yt:function(t){return Qt(t)&&ee.call(t,"callee")&&!re.call(t,"callee")},oe=Array.isArray,ie=9007199254740991;var ae=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ie};var ue=function(t){return null!=t&&ae(t.length)&&!K(t)};var ce=function(t){return Qt(t)&&ue(t)};var se=function(){return!1},fe=a(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?T.Buffer:void 0,i=(o?o.isBuffer:void 0)||se;t.exports=i}),le="[object Object]",pe=Function.prototype,he=Object.prototype,de=pe.toString,ye=he.hasOwnProperty,ve=de.call(Object);var ge=function(t){if(!Qt(t)||D(t)!=le)return!1;var e=Zt(t);if(null===e)return!0;var r=ye.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&de.call(r)==ve},me={};me["[object Float32Array]"]=me["[object Float64Array]"]=me["[object Int8Array]"]=me["[object Int16Array]"]=me["[object Int32Array]"]=me["[object Uint8Array]"]=me["[object Uint8ClampedArray]"]=me["[object Uint16Array]"]=me["[object Uint32Array]"]=!0,me["[object Arguments]"]=me["[object Array]"]=me["[object ArrayBuffer]"]=me["[object Boolean]"]=me["[object DataView]"]=me["[object Date]"]=me["[object Error]"]=me["[object Function]"]=me["[object Map]"]=me["[object Number]"]=me["[object Object]"]=me["[object RegExp]"]=me["[object Set]"]=me["[object String]"]=me["[object WeakMap]"]=!1;var be=function(t){return Qt(t)&&ae(t.length)&&!!me[D(t)]};var we=function(t){return function(e){return t(e)}},_e=a(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&C.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),je=_e&&_e.isTypedArray,Oe=je?we(je):be;var Se=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Ee=Object.prototype.hasOwnProperty;var ke=function(t,e,r){var n=t[e];Ee.call(t,e)&&d(n,r)&&(void 0!==r||e in t)||Lt(t,e,r)};var Ce=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?Lt(r,u,c):ke(r,u,c)}return r};var xe=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},Te=9007199254740991,Ne=/^(?:0|[1-9]\d*)$/;var Ae=function(t,e){var r=typeof t;return!!(e=null==e?Te:e)&&("number"==r||"symbol"!=r&&Ne.test(t))&&t>-1&&t%1==0&&t<e},Pe=Object.prototype.hasOwnProperty;var qe=function(t,e){var r=oe(t),n=!r&&ne(t),o=!r&&!n&&fe(t),i=!r&&!n&&!o&&Oe(t),a=r||n||o||i,u=a?xe(t.length,String):[],c=u.length;for(var s in t)!e&&!Pe.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ae(s,c))||u.push(s);return u};var Re=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Fe=Object.prototype.hasOwnProperty;var Le=function(t){if(!J(t))return Re(t);var e=Vt(t),r=[];for(var n in t)("constructor"!=n||!e&&Fe.call(t,n))&&r.push(n);return r};var ze=function(t){return ue(t)?qe(t,!0):Le(t)};var Ie=function(t){return Ce(t,ze(t))};var Me=function(t,e,r,n,o,i,a){var u=Se(t,r),c=Se(e,r),s=a.get(c);if(s)zt(t,r,s);else{var f=i?i(u,c,r+"",t,e,a):void 0,l=void 0===f;if(l){var p=oe(c),h=!p&&fe(c),d=!p&&!h&&Oe(c);f=c,p||h||d?oe(u)?f=u:ce(u)?f=$t(u):h?(l=!1,f=Mt(c,!0)):d?(l=!1,f=Jt(c,!0)):f=[]:ge(c)||ne(c)?(f=u,ne(u)?f=Ie(u):J(u)&&!K(u)||(f=Wt(c))):l=!1}l&&(a.set(c,f),o(f,c,n,i,a),a.delete(c)),zt(t,r,f)}};var Ue=function t(e,r,n,o,i){e!==r&&It(r,function(a,u){if(i||(i=new Rt),J(a))Me(e,r,u,n,t,o,i);else{var c=o?o(Se(e,u),a,u+"",e,r,i):void 0;void 0===c&&(c=a),zt(e,u,c)}},ze)};var De=function(t){return t};var Je=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},$e=Math.max;var Ge=function(t,e,r){return e=$e(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=$e(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=n[o];return u[e]=r(a),Je(t,this,u)}};var He=function(t){return function(){return t}},Be=Ft?function(t,e){return Ft(t,"toString",{configurable:!0,enumerable:!1,value:He(e),writable:!0})}:De,Ze=800,Ke=16,Ve=Date.now;var We=function(t){var e=0,r=0;return function(){var n=Ve(),o=Ke-(n-r);if(r=n,o>0){if(++e>=Ze)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Be);var Qe=function(t,e){return We(Ge(t,e,De),t+"")};var Xe=function(t,e,r){if(!J(r))return!1;var n=typeof e;return!!("number"==n?ue(r)&&Ae(e,r.length):"string"==n&&e in r)&&d(r[e],t)};var Ye=function(t){return Qe(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&Xe(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})},tr=Ye(function(t,e,r){Ue(t,e,r)});var er,rr=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},nr="function"==typeof setImmediate,or=ir;function ir(t){ar.length||(lr(),ur=!0),ar[ar.length]=t}var ar=[],ur=!1,cr=0,sr=1024;function fr(){for(;cr<ar.length;){var t=cr;if(cr+=1,ar[t].call(),cr>sr){for(var e=0,r=ar.length-cr;e<r;e++)ar[e]=ar[e+cr];ar.length-=cr,cr=0}}ar.length=0,cr=0,ur=!1}function lr(){var e=process.domain;e&&(er||(er=t),er.active=process.domain=null),ur&&nr?setImmediate(fr):process.nextTick(fr),e&&(er.active=process.domain=e)}function pr(){}ir.requestFlush=lr;var hr=null,dr={};var yr=vr;function vr(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==pr&&jr(t,this)}function gr(t,e){for(;3===t._i;)t=t._j;if(vr._l&&vr._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);!function(t,e){or(function(){var r=1===t._i?e.onFulfilled:e.onRejected;if(null!==r){var n=function(t,e){try{return t(e)}catch(t){return hr=t,dr}}(r,t._j);n===dr?br(e.promise,hr):mr(e.promise,n)}else 1===t._i?mr(e.promise,t._j):br(e.promise,t._j)})}(t,e)}function mr(t,e){if(e===t)return br(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=function(t){try{return t.then}catch(t){return hr=t,dr}}(e);if(r===dr)return br(t,hr);if(r===t.then&&e instanceof vr)return t._i=3,t._j=e,void wr(t);if("function"==typeof r)return void jr(r.bind(e),t)}t._i=1,t._j=e,wr(t)}function br(t,e){t._i=2,t._j=e,vr._m&&vr._m(t,e),wr(t)}function wr(t){if(1===t._h&&(gr(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)gr(t,t._k[e]);t._k=null}}function _r(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function jr(t,e){var r=!1,n=function(t,e,r){try{t(e,r)}catch(t){return hr=t,dr}}(t,function(t){r||(r=!0,mr(e,t))},function(t){r||(r=!0,br(e,t))});r||n!==dr||(r=!0,br(e,hr))}vr._l=null,vr._m=null,vr._n=pr,vr.prototype.then=function(t,e){if(this.constructor!==vr)return function(t,e,r){return new t.constructor(function(n,o){var i=new vr(pr);i.then(n,o),gr(t,new _r(e,r,i))})}(this,t,e);var r=new vr(pr);return gr(this,new _r(t,e,r)),r},yr.prototype.done=function(t,e){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(t){setTimeout(function(){throw t},0)})},yr.prototype.finally=function(t){return this.then(function(e){return yr.resolve(t()).then(function(){return e})},function(e){return yr.resolve(t()).then(function(){throw e})})};var Or=Tr(!0),Sr=Tr(!1),Er=Tr(null),kr=Tr(void 0),Cr=Tr(0),xr=Tr("");function Tr(t){var e=new yr(yr._n);return e._i=1,e._j=t,e}yr.resolve=function(t){if(t instanceof yr)return t;if(null===t)return Er;if(void 0===t)return kr;if(!0===t)return Or;if(!1===t)return Sr;if(0===t)return Cr;if(""===t)return xr;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new yr(e.bind(t))}catch(t){return new yr(function(e,r){r(t)})}return Tr(t)},yr.all=function(t){var e=Array.prototype.slice.call(t);return new yr(function(t,r){if(0===e.length)return t([]);var n=e.length;function o(i,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof yr&&a.then===yr.prototype.then){for(;3===a._i;)a=a._j;return 1===a._i?o(i,a._j):(2===a._i&&r(a._j),void a.then(function(t){o(i,t)},r))}var u=a.then;if("function"==typeof u)return void new yr(u.bind(a)).then(function(t){o(i,t)},r)}e[i]=a,0==--n&&t(e)}for(var i=0;i<e.length;i++)o(i,e[i])})},yr.reject=function(t){return new yr(function(e,r){r(t)})},yr.race=function(t){return new yr(function(e,r){t.forEach(function(t){yr.resolve(t).then(e,r)})})},yr.prototype.catch=function(t){return this.then(null,t)};var Nr=[],Ar=function(t){var e;e=Nr.length?Nr.pop():new Pr;e.task=t,e.domain=process.domain,or(e)};function Pr(){this.task=null,this.domain=null}Pr.prototype.call=function(){this.domain&&this.domain.enter();var t=!0;try{this.task.call(),t=!1,this.domain&&this.domain.exit()}finally{t&&or.requestFlush(),this.task=null,this.domain=null,Nr.push(this)}},yr.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var r=[],n=0;n<e;n++)r.push("a"+n);var o=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([qr]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(yr,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),r=[],n=0;n<e;n++)r.push("a"+n);var o=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+qr+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(r.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(yr,t)}(t)};var qr="function (err, res) {if (err) { rj(err); } else { rs(res); }}";yr.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),r="function"==typeof e[e.length-1]?e.pop():null,n=this;try{return t.apply(this,arguments).nodeify(r,n)}catch(t){if(null==r)return new yr(function(e,r){r(t)});Ar(function(){r.call(n,t)})}}},yr.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then(function(r){Ar(function(){t.call(e,null,r)})},function(r){Ar(function(){t.call(e,r)})})},yr.enableSynchronous=function(){yr.prototype.isPending=function(){return 0==this.getState()},yr.prototype.isFulfilled=function(){return 1==this.getState()},yr.prototype.isRejected=function(){return 2==this.getState()},yr.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},yr.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},yr.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},yr.disableSynchronous=function(){yr.prototype.isPending=void 0,yr.prototype.isFulfilled=void 0,yr.prototype.isRejected=void 0,yr.prototype.getValue=void 0,yr.prototype.getReason=void 0,yr.prototype.getState=void 0};var Rr,Fr=yr,Lr=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},zr=Object.prototype.hasOwnProperty;function Ir(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}var Mr={stringify:function(t,e){e=e||"";var r,n,o=[];for(n in"string"!=typeof e&&(e="?"),t)if(zr.call(t,n)){if((r=t[n])||null!==r&&r!==Rr&&!isNaN(r)||(r=""),n=encodeURIComponent(n),r=encodeURIComponent(r),null===n||null===r)continue;o.push(n+"="+r)}return o.length?e+o.join("&"):""},parse:function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,n={};e=r.exec(t);){var o=Ir(e[1]),i=Ir(e[2]);null===o||null===i||o in n||(n[o]=i)}return n}},Ur=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Dr=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,Jr=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function $r(t){return(t||"").toString().replace(Jr,"")}var Gr=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Hr={hash:1,query:1};function Br(t){var e,r=("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:{}).location||{},n={},o=typeof(t=t||r);if("blob:"===t.protocol)n=new Kr(unescape(t.pathname),{});else if("string"===o)for(e in n=new Kr(t,{}),Hr)delete n[e];else if("object"===o){for(e in t)e in Hr||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=Ur.test(t.href))}return n}function Zr(t){t=$r(t);var e=Dr.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function Kr(t,e,r){if(t=$r(t),!(this instanceof Kr))return new Kr(t,e,r);var n,o,i,a,u,c,s=Gr.slice(),f=typeof e,l=this,p=0;for("object"!==f&&"string"!==f&&(r=e,e=null),r&&"function"!=typeof r&&(r=Mr.parse),e=Br(e),n=!(o=Zr(t||"")).protocol&&!o.slashes,l.slashes=o.slashes||n&&e.slashes,l.protocol=o.protocol||e.protocol||"",t=o.rest,o.slashes||(s[3]=[/(.*)/,"pathname"]);p<s.length;p++)"function"!=typeof(a=s[p])?(i=a[0],c=a[1],i!=i?l[c]=t:"string"==typeof i?~(u=t.indexOf(i))&&("number"==typeof a[2]?(l[c]=t.slice(0,u),t=t.slice(u+a[2])):(l[c]=t.slice(u),t=t.slice(0,u))):(u=i.exec(t))&&(l[c]=u[1],t=t.slice(0,u.index)),l[c]=l[c]||n&&a[3]&&e[c]||"",a[4]&&(l[c]=l[c].toLowerCase())):t=a(t);r&&(l.query=r(l.query)),n&&e.slashes&&"/"!==l.pathname.charAt(0)&&(""!==l.pathname||""!==e.pathname)&&(l.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],i=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(i=!0),r.splice(n,1),a--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(l.pathname,e.pathname)),Lr(l.port,l.protocol)||(l.host=l.hostname,l.port=""),l.username=l.password="",l.auth&&(a=l.auth.split(":"),l.username=a[0]||"",l.password=a[1]||""),l.origin=l.protocol&&l.host&&"file:"!==l.protocol?l.protocol+"//"+l.host:"null",l.href=l.toString()}Kr.prototype={set:function(t,e,r){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||Mr.parse)(e)),n[t]=e;break;case"port":n[t]=e,Lr(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";n[t]=e.charAt(0)!==o?o+e:e}else n[t]=e;break;default:n[t]=e}for(var i=0;i<Gr.length;i++){var a=Gr[i];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=Mr.stringify);var e,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(o+=r.hash),o}},Kr.extractProtocol=Zr,Kr.location=Br,Kr.trimLeft=$r,Kr.qs=Mr;var Vr=Kr,Wr=Bt(Object.keys,Object),Qr=Object.prototype.hasOwnProperty;var Xr=function(t){if(!Vt(t))return Wr(t);var e=[];for(var r in Object(t))Qr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Yr=function(t){return ue(t)?qe(t):Xr(t)},tn=Object.prototype.hasOwnProperty,en=Ye(function(t,e){if(Vt(e)||ue(e))Ce(e,Yr(e),t);else for(var r in e)tn.call(e,r)&&ke(t,r,e[r])});function rn(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(!r)throw new Error("arguments[2](schema) is not defined!");if(!e||Array.isArray(e)&&!e.length)return e;var n={object:function(){!function(t,e,r){var n=Object.keys(e),o=r.properties,i=Object.keys(o);0>=n.length||(-1<i.indexOf("any")?n.forEach(function(r){var i=r,a=e[i],u=nn(on(a));if("object"===u||"array"===u){if(!o.any.properties&&!o.any.items)throw new Error("object array has not sub");return t[r]={},"array"===u&&(t[r]=[]),rn(t[r],a,o.any)}-1<n.indexOf(i)&&(t[r]=a)}):i.forEach(function(r){var i=o[r].serverName,a=e[i],u=nn(on(a));if(null===a)return t[r]=a,!0;if(o[r].type!==u)throw new Error("server data [".concat(i,"] type not equal jsonSchema [").concat(r,"] type"));if("object"===u||"array"===u){if(!o[r].properties&&!o[r].items)throw new Error("object array has not sub");return t[r]={},"array"===u&&(t[r]=[]),rn(t[r],a,o[r])}-1<n.indexOf(i)&&(t[r]=a)}))}(t,e,r)},array:function(){!function(t,e,r){var n=r.items,o=n.type;e.forEach(function(e,r){var i=nn(on(e));if(t[r]||("array"===i&&(t[r]=[]),"object"===i&&(t[r]={})),null===e)return t[r]=e,!0;if("none"===i)throw new Error("api key type error");if(o!==i)throw new Error("api key type not match schema key type");return"object"===i||"array"===i?rn(t[r],e,n):void("other"===o&&(t[r]=e))})}(t,e,r)}}[nn(on(e))];"function"==typeof n&&n()}function nn(t){var e={object:"object",array:"array",other:"other"}[t];return e||(e=function(t){return!!(-1<["number","string","boolean"].indexOf(t))&&"other"}(t)),e||"none"}function on(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var an,un=null;function cn(t){return!!t&&("object"==u(t)||"function"==typeof t)}(an=function(t,e){if(!cn(t)||!cn(e))throw new TypeError("Cannot create proxy with a non-object as target or handler");var r=function(){};un=function(){r=function(t){throw new TypeError("Cannot perform '".concat(t,"' on a proxy that has been revoked"))}};var n=e;for(var o in e={get:null,set:null,apply:null,construct:null},n){if(!(o in e))throw new TypeError("nProxy polyfill does not support trap '".concat(o,"'"));e[o]=n[o]}"function"==typeof n&&(e.apply=n.apply.bind(n));var i=this,a=!1,u="function"==typeof t;(e.apply||e.construct||u)&&(i=function(){var n=this&&this.constructor===i,o=Array.prototype.slice.call(arguments);if(r(n?"construct":"apply"),n&&e.construct)return e.construct.call(this,t,o);if(!n&&e.apply)return e.apply(t,this,o);if(u){if(n){o.unshift(t);var a=t.bind.apply(t,o);return new a}return t.apply(this,o)}throw new TypeError(n?"not a constructor":"not a function")},a=!0);var c=e.get?function(t){return r("get"),e.get(this,t,i)}:function(t){return r("get"),this[t]},s=e.set?function(t,n){r("set");e.set(this,t,n,i)}:function(t,e){r("set"),this[t]=e},f=Object.getOwnPropertyNames(t),l={};f.forEach(function(e){if(!(a&&e in i)){var r={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:c.bind(t,e),set:s.bind(t,e)};Object.defineProperty(i,e,r),l[e]=!0}});var p=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(i,Object.getPrototypeOf(t)):i.__proto__?i.__proto__=t.__proto__:p=!1,e.get||!p)for(var h in t)l[h]||Object.defineProperty(i,h,{get:c.bind(t,h)});return Object.seal(t),Object.seal(i),i}).revocable=an.revocable=function(t,e){return{proxy:new an(t,e),revoke:un}};var sn="undefined"==typeof Proxy?an:Proxy,fn={url:"",method:"get",params:{},data:{},headers:{},timeout:1e3},ln={aliapp:function(t){return new Fr(function(e,r){var n=t.data,o=Array.isArray(n)?[]:{},i=t.headers,a="";Object.keys(i).forEach(function(t){"content-type"===t.toLowerCase()&&(a=i[t])}),"application/json"===a.toLowerCase()?o=JSON.stringify(n):Object.keys(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?JSON.stringify(n[t]):n[t]});var u={url:"".concat(t.url).concat(t.qs?"?".concat(t.qs):""),data:o,headers:t.headers,method:t.method,timeout:t.timeout,success:function(t){e({data:t.data,headers:t.headers,status:t.status,statusText:""})},fail:function(t){r(t)}};"GET"===t.method.toUpperCase()&&delete u.data,pn(t,my.request(u))})},weapp:function(t){return new Fr(function(e,r){var n=t.data,o=Array.isArray(n)?[]:{},i=t.headers,a="";Object.keys(i).forEach(function(t){"content-type"===t.toLowerCase()&&(a=i[t])}),"application/x-www-form-urlencoded"===a.toLowerCase()?Object.keys(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?JSON.stringify(n[t]):n[t]}):o=n;var u={url:"".concat(t.url).concat(t.qs?"?".concat(t.qs):""),data:o,header:t.headers,method:t.method,success:function(t){200!=t.statusCode&&(t.data={retcode:5e3,info:{errCode:t.statusCode,msg:t.data,tip:t.data},data:{}}),e({data:t.data,headers:t.header,status:t.statusCode,statusText:""})},fail:function(t){r(t)},complete:function(){}};"GET"===t.method.toUpperCase()&&delete u.data,pn(t,wx.request(u))})},swan:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return new Fr(function(e,r){var n=t.data,o=Array.isArray(n)?[]:{},i=t.headers,a="";Object.keys(i).forEach(function(t){"content-type"===t.toLowerCase()&&(a=i[t])}),"application/x-www-form-urlencoded"===a.toLowerCase()?Object.keys(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?JSON.stringify(n[t]):n[t]}):o=n;var u={url:"".concat(t.url).concat(t.qs?"?".concat(t.qs):""),data:o,header:t.headers,method:t.method,success:function(t){200!=t.statusCode&&(t.data={retcode:5e3,info:{errCode:t.statusCode,msg:t.data,tip:t.data},data:{}}),e({data:t.data,headers:t.header,status:t.statusCode,statusText:""})},fail:function(t){r(t)},complete:function(){}};"GET"===t.method.toUpperCase()&&delete u.data,pn(t,swan.request(u))})})};function pn(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;t&&t.getRequestTask&&"function"==typeof t.getRequestTask&&t.getRequestTask(e)}function hn(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function dn(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?hn(e,!0).forEach(function(r){rr(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):hn(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))});return t}var yn={OK:"FE-200",PARAM:"FE-5000",OTHER:"FE-5001",CATCH:"FE-5002"};function vn(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=t,o=Array.isArray(t);return o||(n=Object.keys(t)),r=this||r,n.forEach(function(n){var i,a,u=o?n.name:n,c=o?n:t[n];if(c.name=u,!u)throw new Error("Function name is required!");if(r[u])throw new Error("Duplicate statements in _this: ".concat(u));r[u]=(i=c,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new sn(t,{get:function(t,r){return e[r]},set:function(){throw new Error("The property is readonly!")},apply:function(t,r,n){return new Fr(function(o,i){function a(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};return function(t,e){return!(isNaN(t)||isNaN(e)||(t=parseInt(t),e=parseInt(e),0>=t||0>=e))}(r,e)&&l<=e?setTimeout(function(){n(t>e)},r):void n(!0)}var u=e,c=u.interval,s=e,f=s.retryTimes,l=0;!function n(u){++l,t(u||{},e,function(t,s){var p=t.data;if(e=tr(e,{headers:s.headers,timeout:s.timeout,fnName:s.fnName}),s.err)return r.emit("cnfapi:res:reject",{fnName:s.fnName,retcode:s.err.retcode,msg:s.err.msg,headers:e.headers}),i({retcode:s.err.retcode,msg:s.err.msg,headers:e.headers});if(t.retcode!==yn.OK)return r.emit("cnfapi:res:reject",{fnName:s.fnName,retcode:t.retcode,msg:t.errMsg,headers:e.headers}),i({retcode:t.retcode,msg:t.errMsg,headers:e.headers});var h=e.url;s.restful&&(h=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=/\{(.+?)\}/g,n=null;do{(n=r.exec(t))&&1<n.length&&(t=t.replace(n[0],e[n[1]]||""))}while(n);return t}(h,s.restful)),r.emit("cnfapi:req:before",{fnName:s.fnName,url:h,timeout:e.timeout,env:e.env,method:e.method,headers:e.headers,data:p.postData,qs:p.qs,params:p.getData,getRequestTask:s.getRequestTask}),function(t){if("function"!=typeof ln[t.env])throw new Error("http env error!");return ln[t.env](en(fn,t))}({url:h,timeout:e.timeout,env:e.env,method:e.method,headers:e.headers,data:p.postData,qs:p.qs,params:p.getData,getRequestTask:s.getRequestTask}).then(function(t){var a=t.data;e.status=t.status,e.statusText=t.statusText;var c="function"==typeof s.openResInterceptor&&s.openResInterceptor.call(e,a);if(c&&l<f+(f?1:2))return s.resInterceptor.call(e,a,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t)return r.emit("cnfapi:res:reject",dn({fnName:s.fnName},t)),i(t);var o=tr(u.data,e.data),a=tr(s.headers,e.headers);u.data=o,s.headers=a,n(u)});if("function"==typeof s.resSuccessCallback)return s.resSuccessCallback(a,function(n,a){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200;return n?(r.emit("cnfapi:res:reject",dn({fnName:s.fnName},n||_n({retcode:500,headers:t.headers}))),void i(n||_n({retcode:500,headers:t.headers}))):(l=0,On(e.model)||(a=jn(e.model,a)),r.emit("cnfapi:res:resolve",dn({fnName:s.fnName},wn({data:a,headers:t.headers,retcode:u}))),o(wn({data:a,headers:t.headers,retcode:u})))});if(/^2\d/.test(+a.retcode)){l=0;var p=a.data;return On(e.model)||(p=jn(e.model,p)),r.emit("cnfapi:res:resolve",dn({fnName:s.fnName},wn({data:p,headers:t.headers,retcode:a.retcode}))),o(wn({data:p,headers:t.headers,retcode:a.retcode}))}r.emit("cnfapi:res:reject",dn({fnName:s.fnName},_n({retcode:a.retcode,msg:a.msg,headers:t.headers}))),i(_n({retcode:a.retcode,msg:a.msg,headers:t.headers}))},function(t){var e=JSON.stringify(t);return e.toLowerCase().includes("abort")?(r.emit("cnfapi:res:reject",dn({fnName:s.fnName},_n({retcode:yn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))),i(_n({retcode:yn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))):void a(l,f,c,function(e){return e?(l=0,r.emit("cnfapi:res:reject",dn({fnName:s.fnName},_n({retcode:yn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))),i(_n({retcode:yn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))):void n(u)})}).catch(function(t){l=0,r.emit("cnfapi:res:catch",dn({fnName:s.fnName},_n({retcode:yn.CATCH,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))),i(_n({retcode:yn.CATCH,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))})})}(n[0]||{})})}})}(a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};return t.fnName=u,t.openResInterceptor=t.openResInterceptor||e.openResInterceptor,t.resInterceptor=t.resInterceptor||e.resInterceptor,t.resSuccessCallback=t.resSuccessCallback||e.resSuccessCallback,r._before=r._before||e._before,n.url=t.url||n.url,"function"==typeof r._before?r._before(t,n,function(e){mn((t=tr(t,e)).data||{},n.params,function(e){o(e,t)})}):void mn(t.data||{},n.params,function(e){o(e,t)})},JSON.parse(JSON.stringify(function(t,e,r){var n,o={url:"",baseURL:e.baseURL,env:e.env,headers:e.headers,timeout:e.timeout,method:t.method||e.method,model:t.resSchema||{},interval:t.interval||0,retryTimes:t.retryTimes||0,pathname:bn(t.apiName),params:gn(t.params),fnName:t.name,signKey:t.signKey,status:"",statusText:""},i=Vr(t.apiName);return o.url=o.baseURL+o.pathname,n=t.apiName,(/^((http:\/\/)|(https:\/\/)|(:\/\/))/.test(n)||/^(localhost)/.test(n))&&(o=en(o,{baseURL:i.origin,pathname:bn(i.pathname),url:i.href})),Object.keys(o).forEach(function(t){if(r[t])throw new Error("Duplicate statements in proxy Function: ".concat(t));r[t]=o[t]}),tr({},t,o)}(i,e,a))))),c=null}),r}function gn(t){function e(t,e){return{required:!!t.isNeed,method:e.toUpperCase()}}var r={},n=t.get||t.GET||[],o=t.post||t.POST||[];return n.forEach(function(t){r[t.param]=e(t,"GET")}),o.forEach(function(t){r[t.param]=e(t,"POST")}),r}function mn(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};setTimeout(function(){var n={retcode:"FE-5000",errMsg:"",data:{}},o=[],i={},a={};Object.keys(e).every(function(r){var u=e[r],c=u.method,s=u.required,f=t[r],l=function(t,e,r){return r&&null==t?{result:!1,errMsg:"param: ".concat(e,". Is Required!")}:{result:!0,errMsg:""}}(f,r,s);return l.result?!(void 0!==f&&null!=f&&("GET"===c.toUpperCase()?(i[r]=f,o.push("".concat(r,"=").concat(encodeURIComponent(f)))):a[r]=f,0)):(n.errMsg=l.errMsg,!1)})?(n.retcode=yn.OK,n.data={qs:o.join("&"),postData:a,getData:i}):n.retcode=yn.PARAM,r(n)},0)}function bn(t){return/^\//.test(t)?t:"/".concat(t)}function wn(t){return{data:t.data,headers:t.headers,retcode:t.retcode}}function _n(t){return{retcode:t.retcode||"FE-5001",msg:t.msg||"unknown",headers:t.headers||{}}}function jn(t,e){var r=Array.isArray(e)?[]:{};return rn(r,e,t),r}function On(t){return!t||!Object.keys(t).length}function Sn(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}return function(t){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,n);var i=(t=s(this,f(n).call(this))).getType(o);if("object"!==t.getType(e)||"object"!==i&&"array"!==i)throw new Error("constructor params require Object type");var a=JSON.parse(JSON.stringify(o));return t.merge=tr,t.outConf=e,Object.defineProperty(c(t),"apiList",{get:function(){return a}}),t.init(),t}return p(n,e),o(n,[{key:"init",value:function(){this.mergeConf(this.initConf,this.outConf),vn.apply(this,[JSON.parse(JSON.stringify(this.apiList)),this.defaultOpts])}},{key:"mergeConf",value:function(t,e){var r=this,n={};if("object"!==this.getType(t)||"object"!==this.getType(e))throw new Error("mergeConf argument Not Object");return Object.keys(t).forEach(function(o){var i=t[o],a=null,u=t[o].vaildFn,c="function"==typeof t[o].default&&t[o].default.apply(r)||"";if(i.required&&!c&&!e[o])throw new Error("".concat(i.errMsg));if(n[o]=e[o]||c,"function"==typeof u&&(a=u(n[o])),null!=a&&!a.result)throw new Error("".concat(a.errMsg))}),n}},{key:"openResInterceptor",value:function(){return this.conf.openResInterceptor.apply(this,arguments)}},{key:"_before",value:function(t,e){e(t)}},{key:"getType",value:function(t){return function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}(t)}},{key:"conf",get:function(){return this.mergeConf(this.initConf,this.outConf)}},{key:"initConf",get:function(){return{baseURL:{required:!0,errMsg:"baseURL is required",vaildFn:function(t){return{result:/^((http:\/\/)|(https:\/\/)|(:\/\/))([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}(\/)?/.test(t)||/^((http:\/\/)|(https:\/\/)|(:\/\/))(localhost)/.test(t),errMsg:"invalid baseURL"}}},timeout:{required:!0,errMsg:"timeout is required or not 0",default:function(){return 3e3},vaildFn:function(t){return{result:!isNaN(t)&&0!=t,errMsg:"invalid timeout"}}},env:{required:!0,errMsg:"invalid env",default:function(){return"browser"},vaildFn:function(t){var e={result:-1<["browser","aliapp","weapp","swan"].indexOf(t),errMsg:'invalid env, env must in ["browser", "aliapp" ,"weapp", "swan"]'};return("aliapp"===t||"weapp"===t)&&(window=void 0,document=void 0),"browser"===t&&(e={result:window&&document&&"undefined"!=typeof window&&"undefined"!=typeof document,errMsg:'invalid env, env not in browser, env must in ["browser", "aliapp" ,"weapp", "swan"]'}),e}},openResInterceptor:{required:!1,default:function(){return function(){return!1}}},resInterceptor:{required:!1,default:function(){return function(){}}},resSuccessCallback:{required:!1,default:function(){return function(t,e){e(!1,t)}}},resFormat:{description:"接口返回格式",required:!1,default:function(){return{type:"object",properties:{retcode:{type:"string"},msg:{type:"string"},data:{type:"object"}}}}}}}},{key:"defaultOpts",get:function(){return this.merge({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},this.outConf,this.conf)}}]),n}()});
//# sourceMappingURL=cnfapi-miniprogram.min.js.map
