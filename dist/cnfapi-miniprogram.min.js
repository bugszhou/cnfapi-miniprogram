!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("domain"),require("events")):"function"==typeof define&&define.amd?define(["domain","events"],e):(t=t||self,function(){var r=t["cnfapi-miniprogram"],n=t["cnfapi-miniprogram"]=e(t.domain$1,t.EventEmitter);n.noConflict=function(){return t["cnfapi-miniprogram"]=r,n}}())}(this,function(t,e){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t,e){return t(e={exports:{}},e.exports),e.exports}var s=i(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(n){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=r=function(t){return e(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},r(n)}t.exports=r});var u=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var c=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?u(t):e},f=i(function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e}),p=i(function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e});var l=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)};var h=function(){this.__data__=[],this.size=0};var d=function(t,e){return t===e||t!=t&&e!=e};var y=function(t,e){for(var r=t.length;r--;)if(d(t[r][0],e))return r;return-1},v=Array.prototype.splice;var g=function(t){var e=this.__data__,r=y(e,t);return!(r<0||(r==e.length-1?e.pop():v.call(e,r,1),--this.size,0))};var m=function(t){var e=this.__data__,r=y(e,t);return r<0?void 0:e[r][1]};var b=function(t){return y(this.__data__,t)>-1};var w=function(t,e){var r=this.__data__,n=y(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function _(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_.prototype.clear=h,_.prototype.delete=g,_.prototype.get=m,_.prototype.has=b,_.prototype.set=w;var j=_;var O=function(){this.__data__=new j,this.size=0};var q=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var S=function(t){return this.__data__.get(t)};var E=function(t){return this.__data__.has(t)},k="object"==typeof a&&a&&a.Object===Object&&a,C="object"==typeof self&&self&&self.Object===Object&&self,x=k||C||Function("return this")(),T=x.Symbol,N=Object.prototype,A=N.hasOwnProperty,P=N.toString,R=T?T.toStringTag:void 0;var D=function(t){var e=A.call(t,R),r=t[R];try{t[R]=void 0;var n=!0}catch(t){}var o=P.call(t);return n&&(e?t[R]=r:delete t[R]),o},F=Object.prototype.toString;var L=function(t){return F.call(t)},z="[object Null]",I="[object Undefined]",M=T?T.toStringTag:void 0;var U=function(t){return null==t?void 0===t?I:z:M&&M in Object(t)?D(t):L(t)};var J=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},H="[object AsyncFunction]",$="[object Function]",G="[object GeneratorFunction]",B="[object Proxy]";var Z,K=function(t){if(!J(t))return!1;var e=U(t);return e==$||e==G||e==H||e==B},V=x["__core-js_shared__"],W=(Z=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var Q=function(t){return!!W&&W in t},X=Function.prototype.toString;var Y=function(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""},tt=/^\[object .+?Constructor\]$/,et=Function.prototype,rt=Object.prototype,nt=et.toString,ot=rt.hasOwnProperty,at=RegExp("^"+nt.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var it=function(t){return!(!J(t)||Q(t))&&(K(t)?at:tt).test(Y(t))};var st=function(t,e){return null==t?void 0:t[e]};var ut=function(t,e){var r=st(t,e);return it(r)?r:void 0},ct=ut(x,"Map"),ft=ut(Object,"create");var pt=function(){this.__data__=ft?ft(null):{},this.size=0};var lt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ht="__lodash_hash_undefined__",dt=Object.prototype.hasOwnProperty;var yt=function(t){var e=this.__data__;if(ft){var r=e[t];return r===ht?void 0:r}return dt.call(e,t)?e[t]:void 0},vt=Object.prototype.hasOwnProperty;var gt=function(t){var e=this.__data__;return ft?void 0!==e[t]:vt.call(e,t)},mt="__lodash_hash_undefined__";var bt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ft&&void 0===e?mt:e,this};function wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}wt.prototype.clear=pt,wt.prototype.delete=lt,wt.prototype.get=yt,wt.prototype.has=gt,wt.prototype.set=bt;var _t=wt;var jt=function(){this.size=0,this.__data__={hash:new _t,map:new(ct||j),string:new _t}};var Ot=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var qt=function(t,e){var r=t.__data__;return Ot(e)?r["string"==typeof e?"string":"hash"]:r.map};var St=function(t){var e=qt(this,t).delete(t);return this.size-=e?1:0,e};var Et=function(t){return qt(this,t).get(t)};var kt=function(t){return qt(this,t).has(t)};var Ct=function(t,e){var r=qt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function xt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}xt.prototype.clear=jt,xt.prototype.delete=St,xt.prototype.get=Et,xt.prototype.has=kt,xt.prototype.set=Ct;var Tt=xt,Nt=200;var At=function(t,e){var r=this.__data__;if(r instanceof j){var n=r.__data__;if(!ct||n.length<Nt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Tt(n)}return r.set(t,e),this.size=r.size,this};function Pt(t){var e=this.__data__=new j(t);this.size=e.size}Pt.prototype.clear=O,Pt.prototype.delete=q,Pt.prototype.get=S,Pt.prototype.has=E,Pt.prototype.set=At;var Rt=Pt,Dt=function(){try{var t=ut(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Ft=function(t,e,r){"__proto__"==e&&Dt?Dt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Lt=function(t,e,r){(void 0===r||d(t[e],r))&&(void 0!==r||e in t)||Ft(t,e,r)};var zt=function(t){return function(e,r,n){for(var o=-1,a=Object(e),i=n(e),s=i.length;s--;){var u=i[t?s:++o];if(!1===r(a[u],u,a))break}return e}}(),It=i(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?x.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}}),Mt=x.Uint8Array;var Ut=function(t){var e=new t.constructor(t.byteLength);return new Mt(e).set(new Mt(t)),e};var Jt=function(t,e){var r=e?Ut(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Ht=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},$t=Object.create,Gt=function(){function t(){}return function(e){if(!J(e))return{};if($t)return $t(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Bt=function(t,e){return function(r){return t(e(r))}},Zt=Bt(Object.getPrototypeOf,Object),Kt=Object.prototype;var Vt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Kt)};var Wt=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:Gt(Zt(t))};var Qt=function(t){return null!=t&&"object"==typeof t},Xt="[object Arguments]";var Yt=function(t){return Qt(t)&&U(t)==Xt},te=Object.prototype,ee=te.hasOwnProperty,re=te.propertyIsEnumerable,ne=Yt(function(){return arguments}())?Yt:function(t){return Qt(t)&&ee.call(t,"callee")&&!re.call(t,"callee")},oe=Array.isArray,ae=9007199254740991;var ie=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ae};var se=function(t){return null!=t&&ie(t.length)&&!K(t)};var ue=function(t){return Qt(t)&&se(t)};var ce=function(){return!1},fe=i(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?x.Buffer:void 0,a=(o?o.isBuffer:void 0)||ce;t.exports=a}),pe="[object Object]",le=Function.prototype,he=Object.prototype,de=le.toString,ye=he.hasOwnProperty,ve=de.call(Object);var ge=function(t){if(!Qt(t)||U(t)!=pe)return!1;var e=Zt(t);if(null===e)return!0;var r=ye.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&de.call(r)==ve},me={};me["[object Float32Array]"]=me["[object Float64Array]"]=me["[object Int8Array]"]=me["[object Int16Array]"]=me["[object Int32Array]"]=me["[object Uint8Array]"]=me["[object Uint8ClampedArray]"]=me["[object Uint16Array]"]=me["[object Uint32Array]"]=!0,me["[object Arguments]"]=me["[object Array]"]=me["[object ArrayBuffer]"]=me["[object Boolean]"]=me["[object DataView]"]=me["[object Date]"]=me["[object Error]"]=me["[object Function]"]=me["[object Map]"]=me["[object Number]"]=me["[object Object]"]=me["[object RegExp]"]=me["[object Set]"]=me["[object String]"]=me["[object WeakMap]"]=!1;var be=function(t){return Qt(t)&&ie(t.length)&&!!me[U(t)]};var we=function(t){return function(e){return t(e)}},_e=i(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&k.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a}),je=_e&&_e.isTypedArray,Oe=je?we(je):be;var qe=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Se=Object.prototype.hasOwnProperty;var Ee=function(t,e,r){var n=t[e];Se.call(t,e)&&d(n,r)&&(void 0!==r||e in t)||Ft(t,e,r)};var ke=function(t,e,r,n){var o=!r;r||(r={});for(var a=-1,i=e.length;++a<i;){var s=e[a],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),o?Ft(r,s,u):Ee(r,s,u)}return r};var Ce=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},xe=9007199254740991,Te=/^(?:0|[1-9]\d*)$/;var Ne=function(t,e){var r=typeof t;return!!(e=null==e?xe:e)&&("number"==r||"symbol"!=r&&Te.test(t))&&t>-1&&t%1==0&&t<e},Ae=Object.prototype.hasOwnProperty;var Pe=function(t,e){var r=oe(t),n=!r&&ne(t),o=!r&&!n&&fe(t),a=!r&&!n&&!o&&Oe(t),i=r||n||o||a,s=i?Ce(t.length,String):[],u=s.length;for(var c in t)!e&&!Ae.call(t,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ne(c,u))||s.push(c);return s};var Re=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},De=Object.prototype.hasOwnProperty;var Fe=function(t){if(!J(t))return Re(t);var e=Vt(t),r=[];for(var n in t)("constructor"!=n||!e&&De.call(t,n))&&r.push(n);return r};var Le=function(t){return se(t)?Pe(t,!0):Fe(t)};var ze=function(t){return ke(t,Le(t))};var Ie=function(t,e,r,n,o,a,i){var s=qe(t,r),u=qe(e,r),c=i.get(u);if(c)Lt(t,r,c);else{var f=a?a(s,u,r+"",t,e,i):void 0,p=void 0===f;if(p){var l=oe(u),h=!l&&fe(u),d=!l&&!h&&Oe(u);f=u,l||h||d?oe(s)?f=s:ue(s)?f=Ht(s):h?(p=!1,f=It(u,!0)):d?(p=!1,f=Jt(u,!0)):f=[]:ge(u)||ne(u)?(f=s,ne(s)?f=ze(s):J(s)&&!K(s)||(f=Wt(u))):p=!1}p&&(i.set(u,f),o(f,u,n,a,i),i.delete(u)),Lt(t,r,f)}};var Me=function t(e,r,n,o,a){e!==r&&zt(r,function(i,s){if(a||(a=new Rt),J(i))Ie(e,r,s,n,t,o,a);else{var u=o?o(qe(e,s),i,s+"",e,r,a):void 0;void 0===u&&(u=i),Lt(e,s,u)}},Le)};var Ue=function(t){return t};var Je=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},He=Math.max;var $e=function(t,e,r){return e=He(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,a=He(n.length-e,0),i=Array(a);++o<a;)i[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(i),Je(t,this,s)}};var Ge=function(t){return function(){return t}},Be=Dt?function(t,e){return Dt(t,"toString",{configurable:!0,enumerable:!1,value:Ge(e),writable:!0})}:Ue,Ze=800,Ke=16,Ve=Date.now;var We=function(t){var e=0,r=0;return function(){var n=Ve(),o=Ke-(n-r);if(r=n,o>0){if(++e>=Ze)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Be);var Qe=function(t,e){return We($e(t,e,Ue),t+"")};var Xe=function(t,e,r){if(!J(r))return!1;var n=typeof e;return!!("number"==n?se(r)&&Ne(e,r.length):"string"==n&&e in r)&&d(r[e],t)};var Ye=function(t){return Qe(function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,i&&Xe(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n,a)}return e})},tr=Ye(function(t,e,r){Me(t,e,r)});var er,rr=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},nr="function"==typeof setImmediate,or=ar;function ar(t){ir.length||(pr(),sr=!0),ir[ir.length]=t}var ir=[],sr=!1,ur=0,cr=1024;function fr(){for(;ur<ir.length;){var t=ur;if(ur+=1,ir[t].call(),ur>cr){for(var e=0,r=ir.length-ur;e<r;e++)ir[e]=ir[e+ur];ir.length-=ur,ur=0}}ir.length=0,ur=0,sr=!1}function pr(){var e=process.domain;e&&(er||(er=t),er.active=process.domain=null),sr&&nr?setImmediate(fr):process.nextTick(fr),e&&(er.active=process.domain=e)}function lr(){}ar.requestFlush=pr;var hr=null,dr={};var yr=vr;function vr(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==lr&&jr(t,this)}function gr(t,e){for(;3===t._i;)t=t._j;if(vr._l&&vr._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);!function(t,e){or(function(){var r=1===t._i?e.onFulfilled:e.onRejected;if(null!==r){var n=function(t,e){try{return t(e)}catch(t){return hr=t,dr}}(r,t._j);n===dr?br(e.promise,hr):mr(e.promise,n)}else 1===t._i?mr(e.promise,t._j):br(e.promise,t._j)})}(t,e)}function mr(t,e){if(e===t)return br(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var r=function(t){try{return t.then}catch(t){return hr=t,dr}}(e);if(r===dr)return br(t,hr);if(r===t.then&&e instanceof vr)return t._i=3,t._j=e,void wr(t);if("function"==typeof r)return void jr(r.bind(e),t)}t._i=1,t._j=e,wr(t)}function br(t,e){t._i=2,t._j=e,vr._m&&vr._m(t,e),wr(t)}function wr(t){if(1===t._h&&(gr(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)gr(t,t._k[e]);t._k=null}}function _r(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function jr(t,e){var r=!1,n=function(t,e,r){try{t(e,r)}catch(t){return hr=t,dr}}(t,function(t){r||(r=!0,mr(e,t))},function(t){r||(r=!0,br(e,t))});r||n!==dr||(r=!0,br(e,hr))}vr._l=null,vr._m=null,vr._n=lr,vr.prototype.then=function(t,e){if(this.constructor!==vr)return function(t,e,r){return new t.constructor(function(n,o){var a=new vr(lr);a.then(n,o),gr(t,new _r(e,r,a))})}(this,t,e);var r=new vr(lr);return gr(this,new _r(t,e,r)),r},yr.prototype.done=function(t,e){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(t){setTimeout(function(){throw t},0)})},yr.prototype.finally=function(t){return this.then(function(e){return yr.resolve(t()).then(function(){return e})},function(e){return yr.resolve(t()).then(function(){throw e})})};var Or=xr(!0),qr=xr(!1),Sr=xr(null),Er=xr(void 0),kr=xr(0),Cr=xr("");function xr(t){var e=new yr(yr._n);return e._i=1,e._j=t,e}yr.resolve=function(t){if(t instanceof yr)return t;if(null===t)return Sr;if(void 0===t)return Er;if(!0===t)return Or;if(!1===t)return qr;if(0===t)return kr;if(""===t)return Cr;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new yr(e.bind(t))}catch(t){return new yr(function(e,r){r(t)})}return xr(t)},yr.all=function(t){var e=Array.prototype.slice.call(t);return new yr(function(t,r){if(0===e.length)return t([]);var n=e.length;function o(a,i){if(i&&("object"==typeof i||"function"==typeof i)){if(i instanceof yr&&i.then===yr.prototype.then){for(;3===i._i;)i=i._j;return 1===i._i?o(a,i._j):(2===i._i&&r(i._j),void i.then(function(t){o(a,t)},r))}var s=i.then;if("function"==typeof s)return void new yr(s.bind(i)).then(function(t){o(a,t)},r)}e[a]=i,0==--n&&t(e)}for(var a=0;a<e.length;a++)o(a,e[a])})},yr.reject=function(t){return new yr(function(e,r){r(t)})},yr.race=function(t){return new yr(function(e,r){t.forEach(function(t){yr.resolve(t).then(e,r)})})},yr.prototype.catch=function(t){return this.then(null,t)};var Tr=[],Nr=function(t){var e;e=Tr.length?Tr.pop():new Ar;e.task=t,e.domain=process.domain,or(e)};function Ar(){this.task=null,this.domain=null}Ar.prototype.call=function(){this.domain&&this.domain.enter();var t=!0;try{this.task.call(),t=!1,this.domain&&this.domain.exit()}finally{t&&or.requestFlush(),this.task=null,this.domain=null,Tr.push(this)}},yr.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var r=[],n=0;n<e;n++)r.push("a"+n);var o=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([Pr]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(yr,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),r=[],n=0;n<e;n++)r.push("a"+n);var o=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+Pr+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(r.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(yr,t)}(t)};var Pr="function (err, res) {if (err) { rj(err); } else { rs(res); }}";yr.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),r="function"==typeof e[e.length-1]?e.pop():null,n=this;try{return t.apply(this,arguments).nodeify(r,n)}catch(t){if(null==r)return new yr(function(e,r){r(t)});Nr(function(){r.call(n,t)})}}},yr.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then(function(r){Nr(function(){t.call(e,null,r)})},function(r){Nr(function(){t.call(e,r)})})},yr.enableSynchronous=function(){yr.prototype.isPending=function(){return 0==this.getState()},yr.prototype.isFulfilled=function(){return 1==this.getState()},yr.prototype.isRejected=function(){return 2==this.getState()},yr.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},yr.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},yr.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},yr.disableSynchronous=function(){yr.prototype.isPending=void 0,yr.prototype.isFulfilled=void 0,yr.prototype.isRejected=void 0,yr.prototype.getValue=void 0,yr.prototype.getReason=void 0,yr.prototype.getState=void 0};var Rr,Dr=yr,Fr=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},Lr=Object.prototype.hasOwnProperty;function zr(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}var Ir={stringify:function(t,e){e=e||"";var r,n,o=[];for(n in"string"!=typeof e&&(e="?"),t)if(Lr.call(t,n)){if((r=t[n])||null!==r&&r!==Rr&&!isNaN(r)||(r=""),n=encodeURIComponent(n),r=encodeURIComponent(r),null===n||null===r)continue;o.push(n+"="+r)}return o.length?e+o.join("&"):""},parse:function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,n={};e=r.exec(t);){var o=zr(e[1]),a=zr(e[2]);null===o||null===a||o in n||(n[o]=a)}return n}},Mr=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Ur=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,Jr=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function Hr(t){return(t||"").toString().replace(Jr,"")}var $r=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Gr={hash:1,query:1};function Br(t){var e,r=("undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{}).location||{},n={},o=typeof(t=t||r);if("blob:"===t.protocol)n=new Kr(unescape(t.pathname),{});else if("string"===o)for(e in n=new Kr(t,{}),Gr)delete n[e];else if("object"===o){for(e in t)e in Gr||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=Mr.test(t.href))}return n}function Zr(t){t=Hr(t);var e=Ur.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function Kr(t,e,r){if(t=Hr(t),!(this instanceof Kr))return new Kr(t,e,r);var n,o,a,i,s,u,c=$r.slice(),f=typeof e,p=this,l=0;for("object"!==f&&"string"!==f&&(r=e,e=null),r&&"function"!=typeof r&&(r=Ir.parse),e=Br(e),n=!(o=Zr(t||"")).protocol&&!o.slashes,p.slashes=o.slashes||n&&e.slashes,p.protocol=o.protocol||e.protocol||"",t=o.rest,o.slashes||(c[3]=[/(.*)/,"pathname"]);l<c.length;l++)"function"!=typeof(i=c[l])?(a=i[0],u=i[1],a!=a?p[u]=t:"string"==typeof a?~(s=t.indexOf(a))&&("number"==typeof i[2]?(p[u]=t.slice(0,s),t=t.slice(s+i[2])):(p[u]=t.slice(s),t=t.slice(0,s))):(s=a.exec(t))&&(p[u]=s[1],t=t.slice(0,s.index)),p[u]=p[u]||n&&i[3]&&e[u]||"",i[4]&&(p[u]=p[u].toLowerCase())):t=i(t);r&&(p.query=r(p.query)),n&&e.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==e.pathname)&&(p.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(a=!0),r.splice(n,1),i--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(p.pathname,e.pathname)),Fr(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(i=p.auth.split(":"),p.username=i[0]||"",p.password=i[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}Kr.prototype={set:function(t,e,r){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||Ir.parse)(e)),n[t]=e;break;case"port":n[t]=e,Fr(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";n[t]=e.charAt(0)!==o?o+e:e}else n[t]=e;break;default:n[t]=e}for(var a=0;a<$r.length;a++){var i=$r[a];i[4]&&(n[i[1]]=n[i[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=Ir.stringify);var e,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(o+=r.hash),o}},Kr.extractProtocol=Zr,Kr.location=Br,Kr.trimLeft=Hr,Kr.qs=Ir;var Vr=Kr,Wr=Bt(Object.keys,Object),Qr=Object.prototype.hasOwnProperty;var Xr=function(t){if(!Vt(t))return Wr(t);var e=[];for(var r in Object(t))Qr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Yr=function(t){return se(t)?Pe(t):Xr(t)},tn=Object.prototype.hasOwnProperty,en=Ye(function(t,e){if(Vt(e)||se(e))ke(e,Yr(e),t);else for(var r in e)tn.call(e,r)&&Ee(t,r,e[r])});function rn(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(!r)throw new Error("arguments[2](schema) is not defined!");if(!e||Array.isArray(e)&&!e.length)return e;var n={object:function(){!function(t,e,r){var n=Object.keys(e),o=r.properties,a=Object.keys(o);0>=n.length||(-1<a.indexOf("any")?n.forEach(function(r){var a=r,i=e[a],s=nn(on(i));if("object"===s||"array"===s){if(!o.any.properties&&!o.any.items)throw new Error("object array has not sub");return t[r]={},"array"===s&&(t[r]=[]),rn(t[r],i,o.any)}-1<n.indexOf(a)&&(t[r]=i)}):a.forEach(function(r){var a=o[r].serverName,i=e[a],s=nn(on(i));if(null===i)return t[r]=i,!0;if(o[r].type!==s)throw new Error("server data [".concat(a,"] type not equal jsonSchema [").concat(r,"] type"));if("object"===s||"array"===s){if(!o[r].properties&&!o[r].items)throw new Error("object array has not sub");return t[r]={},"array"===s&&(t[r]=[]),rn(t[r],i,o[r])}-1<n.indexOf(a)&&(t[r]=i)}))}(t,e,r)},array:function(){!function(t,e,r){var n=r.items,o=n.type;e.forEach(function(e,r){var a=nn(on(e));if(t[r]||("array"===a&&(t[r]=[]),"object"===a&&(t[r]={})),null===e)return t[r]=e,!0;if("none"===a)throw new Error("api key type error");if(o!==a)throw new Error("api key type not match schema key type");return"object"===a||"array"===a?rn(t[r],e,n):void("other"===o&&(t[r]=e))})}(t,e,r)}}[nn(on(e))];"function"==typeof n&&n()}function nn(t){var e={object:"object",array:"array",other:"other"}[t];return e||(e=function(t){return!!(-1<["number","string","boolean"].indexOf(t))&&"other"}(t)),e||"none"}function on(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var an,sn=null;function un(t){return!!t&&("object"==s(t)||"function"==typeof t)}(an=function(t,e){if(!un(t)||!un(e))throw new TypeError("Cannot create proxy with a non-object as target or handler");var r=function(){};sn=function(){r=function(t){throw new TypeError("Cannot perform '".concat(t,"' on a proxy that has been revoked"))}};var n=e;for(var o in e={get:null,set:null,apply:null,construct:null},n){if(!(o in e))throw new TypeError("nProxy polyfill does not support trap '".concat(o,"'"));e[o]=n[o]}"function"==typeof n&&(e.apply=n.apply.bind(n));var a=this,i=!1,s="function"==typeof t;(e.apply||e.construct||s)&&(a=function(){var n=this&&this.constructor===a,o=Array.prototype.slice.call(arguments);if(r(n?"construct":"apply"),n&&e.construct)return e.construct.call(this,t,o);if(!n&&e.apply)return e.apply(t,this,o);if(s){if(n){o.unshift(t);var i=t.bind.apply(t,o);return new i}return t.apply(this,o)}throw new TypeError(n?"not a constructor":"not a function")},i=!0);var u=e.get?function(t){return r("get"),e.get(this,t,a)}:function(t){return r("get"),this[t]},c=e.set?function(t,n){r("set");e.set(this,t,n,a)}:function(t,e){r("set"),this[t]=e},f=Object.getOwnPropertyNames(t),p={};f.forEach(function(e){if(!(i&&e in a)){var r={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:u.bind(t,e),set:c.bind(t,e)};Object.defineProperty(a,e,r),p[e]=!0}});var l=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(a,Object.getPrototypeOf(t)):a.__proto__?a.__proto__=t.__proto__:l=!1,e.get||!l)for(var h in t)p[h]||Object.defineProperty(a,h,{get:u.bind(t,h)});return Object.seal(t),Object.seal(a),a}).revocable=an.revocable=function(t,e){return{proxy:new an(t,e),revoke:sn}};var cn="undefined"==typeof Proxy?an:Proxy,fn={url:"",method:"get",params:{},data:{},headers:{},timeout:1e3},pn={aliapp:function(t){return new Dr(function(e,r){var n=t.data,o=Array.isArray(n)?[]:{},a=t.headers,i="";Object.keys(a).forEach(function(t){"content-type"===t.toLowerCase()&&(i=a[t])}),"application/json"===i.toLowerCase()?o=JSON.stringify(n):Object.keys(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?JSON.stringify(n[t]):n[t]});var s={url:"".concat(t.url).concat(t.qs?"?".concat(t.qs):""),data:o,headers:t.headers,method:t.method,timeout:t.timeout,success:function(t){e({data:t.data,headers:t.headers,status:t.status,statusText:""})},fail:function(t){r(t)}};"GET"===t.method.toUpperCase()&&delete s.data,ln(t,my.request(s))})},weapp:function(t){return new Dr(function(e,r){var n=t.data,o=Array.isArray(n)?[]:{},a=t.headers,i="";Object.keys(a).forEach(function(t){"content-type"===t.toLowerCase()&&(i=a[t])}),"application/x-www-form-urlencoded"===i.toLowerCase()?Object.keys(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?JSON.stringify(n[t]):n[t]}):o=n;var s={url:"".concat(t.url).concat(t.qs?"?".concat(t.qs):""),data:o,header:t.headers,method:t.method,success:function(t){200!=t.statusCode&&(t.data={retcode:5e3,info:{errCode:t.statusCode,msg:t.data,tip:t.data},data:{}}),e({data:t.data,headers:t.header,status:t.statusCode,statusText:""})},fail:function(t){r(t)},complete:function(){}};"GET"===t.method.toUpperCase()&&delete s.data,ln(t,wx.request(s))})},swan:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return new Dr(function(e,r){var n=t.data,o=Array.isArray(n)?[]:{},a=t.headers,i="";Object.keys(a).forEach(function(t){"content-type"===t.toLowerCase()&&(i=a[t])}),"application/x-www-form-urlencoded"===i.toLowerCase()?Object.keys(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?JSON.stringify(n[t]):n[t]}):o=n;var s={url:"".concat(t.url).concat(t.qs?"?".concat(t.qs):""),data:o,header:t.headers,method:t.method,success:function(t){200!=t.statusCode&&(t.data={retcode:5e3,info:{errCode:t.statusCode,msg:t.data,tip:t.data},data:{}}),e({data:t.data,headers:t.header,status:t.statusCode,statusText:""})},fail:function(t){r(t)},complete:function(){}};"GET"===t.method.toUpperCase()&&delete s.data,ln(t,swan.request(s))})})};function ln(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;t&&t.getRequestTask&&"function"==typeof t.getRequestTask&&t.getRequestTask(e)}function hn(t){if("function"!=typeof pn[t.env])throw new Error("http env error!");return pn[t.env](en(fn,t))}function dn(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function yn(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?dn(e,!0).forEach(function(r){rr(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):dn(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))});return t}var vn={OK:"FE-200",PARAM:"FE-5000",OTHER:"FE-5001",CATCH:"FE-5002"};function gn(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=t,o=Array.isArray(t);return o||(n=Object.keys(t)),r=this||r,n.forEach(function(n){var a,i,s=o?n.name:n,u=o?n:t[n];if(u.name=s,!s)throw new Error("Function name is required!");if(r[s])throw new Error("Duplicate statements in _this: ".concat(s));r[s]=(a=u,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new cn(t,{get:function(t,r){return e[r]},set:function(){throw new Error("The property is readonly!")},apply:function(t,r,n){return new Dr(function(o,a){function i(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};return function(t,e){return!(isNaN(t)||isNaN(e)||(t=parseInt(t),e=parseInt(e),0>=t||0>=e))}(r,e)&&p<=e?setTimeout(function(){n(t>e)},r):void n(!0)}var s=e,u=s.interval,c=e,f=c.retryTimes,p=0;!function n(s){++p,t(s||{},e,function(t,c){var l=t.data;if(e=tr(e,{headers:c.headers,timeout:c.timeout,fnName:c.fnName}),c.err)return r.emit("cnfapi:res:reject",{fnName:c.fnName,retcode:c.err.retcode,msg:c.err.msg,headers:e.headers,req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData}}),a({retcode:c.err.retcode,msg:c.err.msg,headers:e.headers});if(t.retcode!==vn.OK)return r.emit("cnfapi:res:reject",{fnName:c.fnName,retcode:t.retcode,msg:t.errMsg,headers:e.headers,req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData}}),a({retcode:t.retcode,msg:t.errMsg,headers:e.headers});var h=e.url;c.restful&&(h=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=/\{(.+?)\}/g,n=null;do{(n=r.exec(t))&&1<n.length&&(t=t.replace(n[0],e[n[1]]||""))}while(n);return t}(h,c.restful)),r.emit("cnfapi:req:before",{fnName:c.fnName,url:h,timeout:e.timeout,env:e.env,method:e.method,headers:e.headers,data:l.postData,qs:l.qs,params:l.getData,getRequestTask:c.getRequestTask});var d=hn;c.customerHttp&&"function"==typeof c.customerHttp&&(d=c.customerHttp),d({url:h,timeout:e.timeout,env:e.env,method:e.method,headers:e.headers,data:l.postData,qs:l.qs,params:l.getData,getRequestTask:c.getRequestTask}).then(function(t){var i=t.data;e.status=t.status,e.statusText=t.statusText;var u="function"==typeof c.openResInterceptor&&c.openResInterceptor.call(e,i);if(u&&p<f+(f?1:2))return c.resInterceptor.call(e,i,function(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t)return r.emit("cnfapi:res:reject",yn({fnName:c.fnName,req:{headers:e.headers,data:i.postData,qs:i.qs,params:i.getData}},t)),a(t);var i=tr(s.data,o.data),u=tr(c.headers,o.headers);s.data=i,c.headers=u,n(s)});if("function"==typeof c.resSuccessCallback)return c.resSuccessCallback.bind(e)(i,function(n,s){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200;if(!n){p=0,qn(e.model)||(s=On(e.model,s)),r.emit("cnfapi:res:resolve",yn({fnName:c.fnName,req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData}},_n({data:s,headers:t.headers,retcode:u})));var f={};return i.msg&&(f.msg=i.msg),o(_n(yn({data:s,headers:t.headers,retcode:u},f)))}r.emit("cnfapi:res:reject",yn({fnName:c.fnName,req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData}},n||jn({retcode:500,headers:t.headers}))),a(n||jn({retcode:500,headers:t.headers}))});if(/^2\d/.test(+i.retcode)){p=0;var h=i.data;return qn(e.model)||(h=On(e.model,h)),r.emit("cnfapi:res:resolve",yn({fnName:c.fnName,req:{headers:e.headers,data:h.postData,qs:h.qs,params:h.getData}},_n({data:h,headers:t.headers,retcode:i.retcode}))),o(_n({data:h,headers:t.headers,retcode:i.retcode}))}r.emit("cnfapi:res:reject",yn({fnName:c.fnName,req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData}},jn({retcode:i.retcode,msg:i.msg,headers:t.headers}))),a(jn({retcode:i.retcode,msg:i.msg,headers:t.headers}))},function(t){var o=JSON.stringify(t);return o.toLowerCase().includes("abort")?(r.emit("cnfapi:res:reject",yn({fnName:c.fnName,req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData}},jn({retcode:vn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))),a(jn({retcode:vn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))):void i(p,f,u,function(o){return o?(p=0,r.emit("cnfapi:res:reject",yn({req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData},fnName:c.fnName},jn({retcode:vn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))),a(jn({retcode:vn.OTHER,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))):void n(s)})}).catch(function(t){p=0,r.emit("cnfapi:res:catch",yn({req:{headers:e.headers,data:l.postData,qs:l.qs,params:l.getData},fnName:c.fnName},jn({retcode:vn.CATCH,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))),a(jn({retcode:vn.CATCH,msg:"error"===Sn(t)?t.toString():JSON.stringify(t)}))})})}(n[0]||{})})}})}(i=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};return t.fnName=s,t.openResInterceptor=t.openResInterceptor||e.openResInterceptor,t.resInterceptor=t.resInterceptor||e.resInterceptor,t.resSuccessCallback=t.resSuccessCallback||e.resSuccessCallback,t.customerHttp=t.customerHttp||e.customerHttp,r._before=r._before||e._before,n.url=t.url||n.url,"function"==typeof r._before?r._before(t,n,function(e){bn((t=tr(t,e)).data||{},n.params,function(e){o(e,t)})}):void bn(t.data||{},n.params,function(e){o(e,t)})},JSON.parse(JSON.stringify(function(t,e,r){var n,o={url:"",baseURL:e.baseURL,env:e.env,headers:e.headers,timeout:e.timeout,method:t.method||e.method,model:t.resSchema||{},interval:t.interval||0,retryTimes:t.retryTimes||0,pathname:wn(t.apiName),params:mn(t.params),fnName:t.name,signKey:t.signKey,status:"",statusText:""},a=Vr(t.apiName);return o.url=o.baseURL+o.pathname,n=t.apiName,(/^((http:\/\/)|(https:\/\/)|(:\/\/))/.test(n)||/^(localhost)/.test(n))&&(o=en(o,{baseURL:a.origin,pathname:wn(a.pathname),url:a.href})),Object.keys(o).forEach(function(t){if(r[t])throw new Error("Duplicate statements in proxy Function: ".concat(t));r[t]=o[t]}),tr({},t,o)}(a,e,i))))),u=null}),r}function mn(t){function e(t,e){return{required:!!t.isNeed,method:e.toUpperCase()}}var r={},n=t.get||t.GET||[],o=t.post||t.POST||[];return n.forEach(function(t){r[t.param]=e(t,"GET")}),o.forEach(function(t){r[t.param]=e(t,"POST")}),r}function bn(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};setTimeout(function(){var n={retcode:"FE-5000",errMsg:"",data:{}},o=[],a={},i={};Object.keys(e).every(function(r){var s=e[r],u=s.method,c=s.required,f=t[r],p=function(t,e,r){return r&&null==t?{result:!1,errMsg:"param: ".concat(e,". Is Required!")}:{result:!0,errMsg:""}}(f,r,c);return p.result?!(void 0!==f&&null!=f&&("GET"===u.toUpperCase()?(a[r]=f,o.push("".concat(r,"=").concat(encodeURIComponent(f)))):i[r]=f,0)):(n.errMsg=p.errMsg,!1)})?(n.retcode=vn.OK,n.data={qs:o.join("&"),postData:i,getData:a}):n.retcode=vn.PARAM,r(n)},0)}function wn(t){return/^\//.test(t)?t:"/".concat(t)}function _n(t){return{data:t.data,headers:t.headers,retcode:t.retcode}}function jn(t){return{retcode:t.retcode||"FE-5001",msg:t.msg||"unknown",headers:t.headers||{}}}function On(t,e){var r=Array.isArray(e)?[]:{};return rn(r,e,t),r}function qn(t){return!t||!Object.keys(t).length}function Sn(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}return function(t){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,n);var a=(t=c(this,f(n).call(this))).getType(o);if("object"!==t.getType(e)||"object"!==a&&"array"!==a)throw new Error("constructor params require Object type");var i=JSON.parse(JSON.stringify(o));return t.merge=tr,t.outConf=e,Object.defineProperty(u(t),"apiList",{get:function(){return i}}),t.init(),t}return l(n,e),o(n,[{key:"init",value:function(){this.mergeConf(this.initConf,this.outConf),gn.apply(this,[JSON.parse(JSON.stringify(this.apiList)),this.defaultOpts])}},{key:"mergeConf",value:function(t,e){var r=this,n={};if("object"!==this.getType(t)||"object"!==this.getType(e))throw new Error("mergeConf argument Not Object");return Object.keys(t).forEach(function(o){var a=t[o],i=null,s=t[o].vaildFn,u="function"==typeof t[o].default&&t[o].default.apply(r)||"";if(a.required&&!u&&!e[o])throw new Error("".concat(a.errMsg));if(n[o]=e[o]||u,"function"==typeof s&&(i=s(n[o])),null!=i&&!i.result)throw new Error("".concat(i.errMsg))}),n}},{key:"openResInterceptor",value:function(){return this.conf.openResInterceptor.apply(this,arguments)}},{key:"_before",value:function(t,e){e(t)}},{key:"getType",value:function(t){return function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}(t)}},{key:"conf",get:function(){return this.mergeConf(this.initConf,this.outConf)}},{key:"initConf",get:function(){return{baseURL:{required:!0,errMsg:"baseURL is required",vaildFn:function(t){return{result:/^((http:\/\/)|(https:\/\/)|(:\/\/))([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}(\/)?/.test(t)||/^((http:\/\/)|(https:\/\/)|(:\/\/))(localhost)/.test(t),errMsg:"invalid baseURL"}}},timeout:{required:!0,errMsg:"timeout is required or not 0",default:function(){return 3e3},vaildFn:function(t){return{result:!isNaN(t)&&0!=t,errMsg:"invalid timeout"}}},env:{required:!0,errMsg:"invalid env",default:function(){return"browser"},vaildFn:function(t){var e={result:-1<["browser","aliapp","weapp","swan"].indexOf(t),errMsg:'invalid env, env must in ["browser", "aliapp" ,"weapp", "swan"]'};return("aliapp"===t||"weapp"===t)&&(window=void 0,document=void 0),"browser"===t&&(e={result:window&&document&&"undefined"!=typeof window&&"undefined"!=typeof document,errMsg:'invalid env, env not in browser, env must in ["browser", "aliapp" ,"weapp", "swan"]'}),e}},openResInterceptor:{required:!1,default:function(){return function(){return!1}}},resInterceptor:{required:!1,default:function(){return function(){}}},resSuccessCallback:{required:!1,default:function(){return function(t,e){e(!1,t)}}},resFormat:{description:"接口返回格式",required:!1,default:function(){return{type:"object",properties:{retcode:{type:"string"},msg:{type:"string"},data:{type:"object"}}}}}}}},{key:"defaultOpts",get:function(){return this.merge({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},this.outConf,this.conf)}}]),n}()});
//# sourceMappingURL=cnfapi-miniprogram.min.js.map
