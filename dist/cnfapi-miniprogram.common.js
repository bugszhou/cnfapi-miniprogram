!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("promise"),require("url-parse"),require("events")):"function"==typeof define&&define.amd?define(["promise","url-parse","events"],e):(t=t||self,function(){var r=t["cnfapi-miniprogram"],n=t["cnfapi-miniprogram"]=e(t.Promise,t.urlParse,t.EventEmitter);n.noConflict=function(){return t["cnfapi-miniprogram"]=r,n}}())}(this,function(t,e,r){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r;var n=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},o=function(t){return Object(n(t))},i={}.hasOwnProperty,a=function(t,e){return i.call(t,e)},u={}.toString,c=function(t){return u.call(t).slice(8,-1)},f=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==c(t)?t.split(""):Object(t)},s=function(t){return f(n(t))},p=Math.ceil,l=Math.floor,d=function(t){return isNaN(t=+t)?0:(t>0?l:p)(t)},h=Math.min,v=Math.max,y=Math.min,b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(t,e){return t(e={exports:{}},e.exports),e.exports}var m,w=g(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),_=(w.version,g(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),O=g(function(t){var e=_["__core-js_shared__"]||(_["__core-js_shared__"]={});(t.exports=function(t,r){return e[t]||(e[t]=void 0!==r?r:{})})("versions",[]).push({version:w.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),j=0,S=Math.random(),E=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++j+S).toString(36))},T=O("keys"),P=function(t){return T[t]||(T[t]=E(t))},C=(m=!1,function(t,e,r){var n,o,i=s(t),a=(n=i.length)>0?h(d(n),9007199254740991):0,u=function(t,e){return(t=d(t))<0?v(t+e,0):y(t,e)}(r,a);if(m&&e!=e){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((m||u in i)&&i[u]===e)return m||u||0;return!m&&-1}),N=P("IE_PROTO"),x=function(t,e){var r,n=s(t),o=0,i=[];for(r in n)r!=N&&a(n,r)&&i.push(r);for(;e.length>o;)a(n,r=e[o++])&&(~C(i,r)||i.push(r));return i},k="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),A=Object.keys||function(t){return x(t,k)},L=function(t,e,r){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},F=function(t){return"object"==typeof t?null!==t:"function"==typeof t},R=function(t){if(!F(t))throw TypeError(t+" is not an object!");return t},q=function(t){try{return!!t()}catch(t){return!0}},M=!q(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),I=_.document,z=F(I)&&F(I.createElement),D=function(t){return z?I.createElement(t):{}},U=!M&&!q(function(){return 7!=Object.defineProperty(D("div"),"a",{get:function(){return 7}}).a}),G=function(t,e){if(!F(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!F(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!F(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!F(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},H=Object.defineProperty,K={f:M?Object.defineProperty:function(t,e,r){if(R(t),e=G(e,!0),R(r),U)try{return H(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},J=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},B=M?function(t,e,r){return K.f(t,e,J(1,r))}:function(t,e,r){return t[e]=r,t},V=function(t,e,r){var n,o,i,u=t&V.F,c=t&V.G,f=t&V.S,s=t&V.P,p=t&V.B,l=t&V.W,d=c?w:w[e]||(w[e]={}),h=d.prototype,v=c?_:f?_[e]:(_[e]||{}).prototype;for(n in c&&(r=e),r)(o=!u&&v&&void 0!==v[n])&&a(d,n)||(i=o?v[n]:r[n],d[n]=c&&"function"!=typeof v[n]?r[n]:p&&o?L(i,_):l&&v[n]==i?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):s&&"function"==typeof i?L(Function.call,i):i,s&&((d.virtual||(d.virtual={}))[n]=i,t&V.R&&h&&!h[n]&&B(h,n,i)))};V.F=1,V.G=2,V.S=4,V.P=8,V.B=16,V.W=32,V.U=64,V.R=128;var W=V,$=function(t,e){var r=(w.Object||{})[t]||Object[t],n={};n[t]=e(r),W(W.S+W.F*q(function(){r(1)}),"Object",n)};$("keys",function(){return function(t){return A(o(t))}});var Z=w.Object.keys;W(W.S+W.F*!M,"Object",{defineProperty:K.f});var Y=w.Object,Q=function(t,e,r){return Y.defineProperty(t,e,r)},X=w.JSON||(w.JSON={stringify:JSON.stringify}),tt=function(t){return X.stringify.apply(X,arguments)};var et=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Q(t,n.key,n)}}var nt=function(t,e,r){return e&&rt(t.prototype,e),r&&rt(t,r),t},ot=B,it=M?Object.defineProperties:function(t,e){R(t);for(var r,n=A(e),o=n.length,i=0;o>i;)K.f(t,r=n[i++],e[r]);return t},at=_.document,ut=at&&at.documentElement,ct=P("IE_PROTO"),ft=function(){},st=function(){var t,e=D("iframe"),r=k.length;for(e.style.display="none",ut.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),st=t.F;r--;)delete st.prototype[k[r]];return st()},pt=Object.create||function(t,e){var r;return null!==t?(ft.prototype=R(t),r=new ft,ft.prototype=null,r[ct]=t):r=st(),void 0===e?r:it(r,e)},lt=g(function(t){var e=O("wks"),r=_.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:E)("Symbol."+t))}).store=e}),dt=K.f,ht=lt("toStringTag"),vt=function(t,e,r){t&&!a(t=r?t:t.prototype,ht)&&dt(t,ht,{configurable:!0,value:e})},yt={};B(yt,lt("iterator"),function(){return this});var bt,gt=function(t,e,r){t.prototype=pt(yt,{next:J(1,r)}),vt(t,e+" Iterator")},mt=P("IE_PROTO"),wt=Object.prototype,_t=Object.getPrototypeOf||function(t){return t=o(t),a(t,mt)?t[mt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?wt:null},Ot=lt("iterator"),jt=!([].keys&&"next"in[].keys()),St=function(t,e,r,n,o,i,a){gt(r,e,n);var u,c,f,s=function(t){if(!jt&&t in h)return h[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},p=e+" Iterator",l="values"==o,d=!1,h=t.prototype,v=h[Ot]||h["@@iterator"]||o&&h[o],y=v||s(o),b=o?l?s("entries"):y:void 0,g="Array"==e&&h.entries||v;if(g&&(f=_t(g.call(new t)))!==Object.prototype&&f.next&&vt(f,p,!0),l&&v&&"values"!==v.name&&(d=!0,y=function(){return v.call(this)}),a&&(jt||d||!h[Ot])&&B(h,Ot,y),o)if(u={values:l?y:s("values"),keys:i?y:s("keys"),entries:b},a)for(c in u)c in h||ot(h,c,u[c]);else W(W.P+W.F*(jt||d),e,u);return u},Et=(bt=!0,function(t,e){var r,o,i=String(n(t)),a=d(e),u=i.length;return a<0||a>=u?bt?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?bt?i.charAt(a):r:bt?i.slice(a,a+2):o-56320+(r-55296<<10)+65536});St(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=Et(e,r),this._i+=t.length,{value:t,done:!1})});for(var Tt=function(t,e){return{value:e,done:!!t}},Pt=(St(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Tt(1)):Tt(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),lt("toStringTag")),Ct="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Nt=0;Nt<Ct.length;Nt++){var xt=Ct[Nt],kt=_[xt],At=kt&&kt.prototype;At&&!At[Pt]&&B(At,Pt,xt)}var Lt={f:lt},Ft=Lt.f("iterator"),Rt=g(function(t){var e=E("meta"),r=K.f,n=0,o=Object.isExtensible||function(){return!0},i=!q(function(){return o(Object.preventExtensions({}))}),u=function(t){r(t,e,{value:{i:"O"+ ++n,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,r){if(!F(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,e)){if(!o(t))return"F";if(!r)return"E";u(t)}return t[e].i},getWeak:function(t,r){if(!a(t,e)){if(!o(t))return!0;if(!r)return!1;u(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!a(t,e)&&u(t),t}}}),qt=(Rt.KEY,Rt.NEED,Rt.fastKey,Rt.getWeak,Rt.onFreeze,K.f),Mt=function(t){var e=w.Symbol||(w.Symbol={});"_"==t.charAt(0)||t in e||qt(e,t,{value:Lt.f(t)})},It={f:Object.getOwnPropertySymbols},zt={f:{}.propertyIsEnumerable},Dt=Array.isArray||function(t){return"Array"==c(t)},Ut=k.concat("length","prototype"),Gt={f:Object.getOwnPropertyNames||function(t){return x(t,Ut)}},Ht=Gt.f,Kt={}.toString,Jt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Bt={f:function(t){return Jt&&"[object Window]"==Kt.call(t)?function(t){try{return Ht(t)}catch(t){return Jt.slice()}}(t):Ht(s(t))}},Vt=Object.getOwnPropertyDescriptor,Wt={f:M?Vt:function(t,e){if(t=s(t),e=G(e,!0),U)try{return Vt(t,e)}catch(t){}if(a(t,e))return J(!zt.f.call(t,e),t[e])}},$t=Rt.KEY,Zt=Wt.f,Yt=K.f,Qt=Bt.f,Xt=_.Symbol,te=_.JSON,ee=te&&te.stringify,re=lt("_hidden"),ne=lt("toPrimitive"),oe={}.propertyIsEnumerable,ie=O("symbol-registry"),ae=O("symbols"),ue=O("op-symbols"),ce=Object.prototype,fe="function"==typeof Xt&&!!It.f,se=_.QObject,pe=!se||!se.prototype||!se.prototype.findChild,le=M&&q(function(){return 7!=pt(Yt({},"a",{get:function(){return Yt(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=Zt(ce,e);n&&delete ce[e],Yt(t,e,r),n&&t!==ce&&Yt(ce,e,n)}:Yt,de=function(t){var e=ae[t]=pt(Xt.prototype);return e._k=t,e},he=fe&&"symbol"==typeof Xt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Xt},ve=function(t,e,r){return t===ce&&ve(ue,e,r),R(t),e=G(e,!0),R(r),a(ae,e)?(r.enumerable?(a(t,re)&&t[re][e]&&(t[re][e]=!1),r=pt(r,{enumerable:J(0,!1)})):(a(t,re)||Yt(t,re,J(1,{})),t[re][e]=!0),le(t,e,r)):Yt(t,e,r)},ye=function(t,e){R(t);for(var r,n=function(t){var e=A(t),r=It.f;if(r)for(var n,o=r(t),i=zt.f,a=0;o.length>a;)i.call(t,n=o[a++])&&e.push(n);return e}(e=s(e)),o=0,i=n.length;i>o;)ve(t,r=n[o++],e[r]);return t},be=function(t){var e=oe.call(this,t=G(t,!0));return!(this===ce&&a(ae,t)&&!a(ue,t))&&(!(e||!a(this,t)||!a(ae,t)||a(this,re)&&this[re][t])||e)},ge=function(t,e){if(t=s(t),e=G(e,!0),t!==ce||!a(ae,e)||a(ue,e)){var r=Zt(t,e);return!r||!a(ae,e)||a(t,re)&&t[re][e]||(r.enumerable=!0),r}},me=function(t){for(var e,r=Qt(s(t)),n=[],o=0;r.length>o;)a(ae,e=r[o++])||e==re||e==$t||n.push(e);return n},we=function(t){for(var e,r=t===ce,n=Qt(r?ue:s(t)),o=[],i=0;n.length>i;)!a(ae,e=n[i++])||r&&!a(ce,e)||o.push(ae[e]);return o};fe||(ot((Xt=function(){if(this instanceof Xt)throw TypeError("Symbol is not a constructor!");var t=E(arguments.length>0?arguments[0]:void 0),e=function(r){this===ce&&e.call(ue,r),a(this,re)&&a(this[re],t)&&(this[re][t]=!1),le(this,t,J(1,r))};return M&&pe&&le(ce,t,{configurable:!0,set:e}),de(t)}).prototype,"toString",function(){return this._k}),Wt.f=ge,K.f=ve,Gt.f=Bt.f=me,zt.f=be,It.f=we,Lt.f=function(t){return de(lt(t))}),W(W.G+W.W+W.F*!fe,{Symbol:Xt});for(var _e="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Oe=0;_e.length>Oe;)lt(_e[Oe++]);for(var je=A(lt.store),Se=0;je.length>Se;)Mt(je[Se++]);W(W.S+W.F*!fe,"Symbol",{for:function(t){return a(ie,t+="")?ie[t]:ie[t]=Xt(t)},keyFor:function(t){if(!he(t))throw TypeError(t+" is not a symbol!");for(var e in ie)if(ie[e]===t)return e},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),W(W.S+W.F*!fe,"Object",{create:function(t,e){return void 0===e?pt(t):ye(pt(t),e)},defineProperty:ve,defineProperties:ye,getOwnPropertyDescriptor:ge,getOwnPropertyNames:me,getOwnPropertySymbols:we});var Ee=q(function(){It.f(1)});W(W.S+W.F*Ee,"Object",{getOwnPropertySymbols:function(t){return It.f(o(t))}}),te&&W(W.S+W.F*(!fe||q(function(){var t=Xt();return"[null]"!=ee([t])||"{}"!=ee({a:t})||"{}"!=ee(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(F(e)||void 0!==t)&&!he(t))return Dt(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!he(e))return e}),n[1]=e,ee.apply(te,n)}}),Xt.prototype[ne]||B(Xt.prototype,ne,Xt.prototype.valueOf),vt(Xt,"Symbol"),vt(Math,"Math",!0),vt(_.JSON,"JSON",!0),Mt("asyncIterator"),Mt("observable");var Te=w.Symbol,Pe=g(function(t){function e(t){return(e="function"==typeof Te&&"symbol"==typeof Ft?function(t){return typeof t}:function(t){return t&&"function"==typeof Te&&t.constructor===Te&&t!==Te.prototype?"symbol":typeof t})(t)}function r(n){return"function"==typeof Te&&"symbol"===e(Ft)?t.exports=r=function(t){return e(t)}:t.exports=r=function(t){return t&&"function"==typeof Te&&t.constructor===Te&&t!==Te.prototype?"symbol":e(t)},r(n)}t.exports=r});var Ce=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Ne=function(t,e){return!e||"object"!==Pe(e)&&"function"!=typeof e?Ce(t):e};$("getPrototypeOf",function(){return function(t){return _t(o(t))}});var xe=w.Object.getPrototypeOf,ke=function(t,e){if(R(t),!F(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ae={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=L(Function.call,Wt.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return ke(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:ke};W(W.S,"Object",{setPrototypeOf:Ae.set});var Le=w.Object.setPrototypeOf,Fe=g(function(t){function e(r){return t.exports=e=Le?xe:function(t){return t.__proto__||xe(t)},e(r)}t.exports=e});W(W.S,"Object",{create:pt});var Re=w.Object,qe=function(t,e){return Re.create(t,e)},Me=g(function(t){function e(r,n){return t.exports=e=Le||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e});var Ie=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=qe(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Me(t,e)};var ze=function(){this.__data__=[],this.size=0};var De=function(t,e){return t===e||t!=t&&e!=e};var Ue=function(t,e){for(var r=t.length;r--;)if(De(t[r][0],e))return r;return-1},Ge=Array.prototype.splice;var He=function(t){var e=this.__data__,r=Ue(e,t);return!(r<0||(r==e.length-1?e.pop():Ge.call(e,r,1),--this.size,0))};var Ke=function(t){var e=this.__data__,r=Ue(e,t);return r<0?void 0:e[r][1]};var Je=function(t){return Ue(this.__data__,t)>-1};var Be=function(t,e){var r=this.__data__,n=Ue(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Ve(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ve.prototype.clear=ze,Ve.prototype.delete=He,Ve.prototype.get=Ke,Ve.prototype.has=Je,Ve.prototype.set=Be;var We=Ve;var $e=function(){this.__data__=new We,this.size=0};var Ze=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Ye=function(t){return this.__data__.get(t)};var Qe=function(t){return this.__data__.has(t)},Xe="object"==typeof b&&b&&b.Object===Object&&b,tr="object"==typeof self&&self&&self.Object===Object&&self,er=Xe||tr||Function("return this")(),rr=er.Symbol,nr=Object.prototype,or=nr.hasOwnProperty,ir=nr.toString,ar=rr?rr.toStringTag:void 0;var ur=function(t){var e=or.call(t,ar),r=t[ar];try{t[ar]=void 0;var n=!0}catch(t){}var o=ir.call(t);return n&&(e?t[ar]=r:delete t[ar]),o},cr=Object.prototype.toString;var fr=function(t){return cr.call(t)},sr="[object Null]",pr="[object Undefined]",lr=rr?rr.toStringTag:void 0;var dr=function(t){return null==t?void 0===t?pr:sr:lr&&lr in Object(t)?ur(t):fr(t)};var hr=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},vr="[object AsyncFunction]",yr="[object Function]",br="[object GeneratorFunction]",gr="[object Proxy]";var mr,wr=function(t){if(!hr(t))return!1;var e=dr(t);return e==yr||e==br||e==vr||e==gr},_r=er["__core-js_shared__"],Or=(mr=/[^.]+$/.exec(_r&&_r.keys&&_r.keys.IE_PROTO||""))?"Symbol(src)_1."+mr:"";var jr=function(t){return!!Or&&Or in t},Sr=Function.prototype.toString;var Er=function(t){if(null!=t){try{return Sr.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Tr=/^\[object .+?Constructor\]$/,Pr=Function.prototype,Cr=Object.prototype,Nr=Pr.toString,xr=Cr.hasOwnProperty,kr=RegExp("^"+Nr.call(xr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ar=function(t){return!(!hr(t)||jr(t))&&(wr(t)?kr:Tr).test(Er(t))};var Lr=function(t,e){return null==t?void 0:t[e]};var Fr=function(t,e){var r=Lr(t,e);return Ar(r)?r:void 0},Rr=Fr(er,"Map"),qr=Fr(Object,"create");var Mr=function(){this.__data__=qr?qr(null):{},this.size=0};var Ir=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},zr="__lodash_hash_undefined__",Dr=Object.prototype.hasOwnProperty;var Ur=function(t){var e=this.__data__;if(qr){var r=e[t];return r===zr?void 0:r}return Dr.call(e,t)?e[t]:void 0},Gr=Object.prototype.hasOwnProperty;var Hr=function(t){var e=this.__data__;return qr?void 0!==e[t]:Gr.call(e,t)},Kr="__lodash_hash_undefined__";var Jr=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=qr&&void 0===e?Kr:e,this};function Br(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Br.prototype.clear=Mr,Br.prototype.delete=Ir,Br.prototype.get=Ur,Br.prototype.has=Hr,Br.prototype.set=Jr;var Vr=Br;var Wr=function(){this.size=0,this.__data__={hash:new Vr,map:new(Rr||We),string:new Vr}};var $r=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Zr=function(t,e){var r=t.__data__;return $r(e)?r["string"==typeof e?"string":"hash"]:r.map};var Yr=function(t){var e=Zr(this,t).delete(t);return this.size-=e?1:0,e};var Qr=function(t){return Zr(this,t).get(t)};var Xr=function(t){return Zr(this,t).has(t)};var tn=function(t,e){var r=Zr(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function en(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}en.prototype.clear=Wr,en.prototype.delete=Yr,en.prototype.get=Qr,en.prototype.has=Xr,en.prototype.set=tn;var rn=en,nn=200;var on=function(t,e){var r=this.__data__;if(r instanceof We){var n=r.__data__;if(!Rr||n.length<nn-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new rn(n)}return r.set(t,e),this.size=r.size,this};function an(t){var e=this.__data__=new We(t);this.size=e.size}an.prototype.clear=$e,an.prototype.delete=Ze,an.prototype.get=Ye,an.prototype.has=Qe,an.prototype.set=on;var un=an,cn=function(){try{var t=Fr(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var fn=function(t,e,r){"__proto__"==e&&cn?cn(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var sn=function(t,e,r){(void 0===r||De(t[e],r))&&(void 0!==r||e in t)||fn(t,e,r)};var pn=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),u=a.length;u--;){var c=a[t?u:++o];if(!1===r(i[c],c,i))break}return e}}(),ln=g(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?er.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}),dn=er.Uint8Array;var hn=function(t){var e=new t.constructor(t.byteLength);return new dn(e).set(new dn(t)),e};var vn=function(t,e){var r=e?hn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var yn=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},bn=Object.create,gn=function(){function t(){}return function(e){if(!hr(e))return{};if(bn)return bn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var mn=function(t,e){return function(r){return t(e(r))}},wn=mn(Object.getPrototypeOf,Object),_n=Object.prototype;var On=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_n)};var jn=function(t){return"function"!=typeof t.constructor||On(t)?{}:gn(wn(t))};var Sn=function(t){return null!=t&&"object"==typeof t},En="[object Arguments]";var Tn=function(t){return Sn(t)&&dr(t)==En},Pn=Object.prototype,Cn=Pn.hasOwnProperty,Nn=Pn.propertyIsEnumerable,xn=Tn(function(){return arguments}())?Tn:function(t){return Sn(t)&&Cn.call(t,"callee")&&!Nn.call(t,"callee")},kn=Array.isArray,An=9007199254740991;var Ln=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=An};var Fn=function(t){return null!=t&&Ln(t.length)&&!wr(t)};var Rn=function(t){return Sn(t)&&Fn(t)};var qn=function(){return!1},Mn=g(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?er.Buffer:void 0,i=(o?o.isBuffer:void 0)||qn;t.exports=i}),In="[object Object]",zn=Function.prototype,Dn=Object.prototype,Un=zn.toString,Gn=Dn.hasOwnProperty,Hn=Un.call(Object);var Kn=function(t){if(!Sn(t)||dr(t)!=In)return!1;var e=wn(t);if(null===e)return!0;var r=Gn.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Un.call(r)==Hn},Jn={};Jn["[object Float32Array]"]=Jn["[object Float64Array]"]=Jn["[object Int8Array]"]=Jn["[object Int16Array]"]=Jn["[object Int32Array]"]=Jn["[object Uint8Array]"]=Jn["[object Uint8ClampedArray]"]=Jn["[object Uint16Array]"]=Jn["[object Uint32Array]"]=!0,Jn["[object Arguments]"]=Jn["[object Array]"]=Jn["[object ArrayBuffer]"]=Jn["[object Boolean]"]=Jn["[object DataView]"]=Jn["[object Date]"]=Jn["[object Error]"]=Jn["[object Function]"]=Jn["[object Map]"]=Jn["[object Number]"]=Jn["[object Object]"]=Jn["[object RegExp]"]=Jn["[object Set]"]=Jn["[object String]"]=Jn["[object WeakMap]"]=!1;var Bn=function(t){return Sn(t)&&Ln(t.length)&&!!Jn[dr(t)]};var Vn=function(t){return function(e){return t(e)}},Wn=g(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&Xe.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),$n=Wn&&Wn.isTypedArray,Zn=$n?Vn($n):Bn;var Yn=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Qn=Object.prototype.hasOwnProperty;var Xn=function(t,e,r){var n=t[e];Qn.call(t,e)&&De(n,r)&&(void 0!==r||e in t)||fn(t,e,r)};var to=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?fn(r,u,c):Xn(r,u,c)}return r};var eo=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},ro=9007199254740991,no=/^(?:0|[1-9]\d*)$/;var oo=function(t,e){var r=typeof t;return!!(e=null==e?ro:e)&&("number"==r||"symbol"!=r&&no.test(t))&&t>-1&&t%1==0&&t<e},io=Object.prototype.hasOwnProperty;var ao=function(t,e){var r=kn(t),n=!r&&xn(t),o=!r&&!n&&Mn(t),i=!r&&!n&&!o&&Zn(t),a=r||n||o||i,u=a?eo(t.length,String):[],c=u.length;for(var f in t)!e&&!io.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||oo(f,c))||u.push(f);return u};var uo=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},co=Object.prototype.hasOwnProperty;var fo=function(t){if(!hr(t))return uo(t);var e=On(t),r=[];for(var n in t)("constructor"!=n||!e&&co.call(t,n))&&r.push(n);return r};var so=function(t){return Fn(t)?ao(t,!0):fo(t)};var po=function(t){return to(t,so(t))};var lo=function(t,e,r,n,o,i,a){var u=Yn(t,r),c=Yn(e,r),f=a.get(c);if(f)sn(t,r,f);else{var s=i?i(u,c,r+"",t,e,a):void 0,p=void 0===s;if(p){var l=kn(c),d=!l&&Mn(c),h=!l&&!d&&Zn(c);s=c,l||d||h?kn(u)?s=u:Rn(u)?s=yn(u):d?(p=!1,s=ln(c,!0)):h?(p=!1,s=vn(c,!0)):s=[]:Kn(c)||xn(c)?(s=u,xn(u)?s=po(u):hr(u)&&!wr(u)||(s=jn(c))):p=!1}p&&(a.set(c,s),o(s,c,n,i,a),a.delete(c)),sn(t,r,s)}};var ho=function t(e,r,n,o,i){e!==r&&pn(r,function(a,u){if(i||(i=new un),hr(a))lo(e,r,u,n,t,o,i);else{var c=o?o(Yn(e,u),a,u+"",e,r,i):void 0;void 0===c&&(c=a),sn(e,u,c)}},so)};var vo=function(t){return t};var yo=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},bo=Math.max;var go=function(t,e,r){return e=bo(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=bo(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=n[o];return u[e]=r(a),yo(t,this,u)}};var mo=function(t){return function(){return t}},wo=cn?function(t,e){return cn(t,"toString",{configurable:!0,enumerable:!1,value:mo(e),writable:!0})}:vo,_o=800,Oo=16,jo=Date.now;var So=function(t){var e=0,r=0;return function(){var n=jo(),o=Oo-(n-r);if(r=n,o>0){if(++e>=_o)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(wo);var Eo=function(t,e){return So(go(t,e,vo),t+"")};var To=function(t,e,r){if(!hr(r))return!1;var n=typeof e;return!!("number"==n?Fn(r)&&oo(e,r.length):"string"==n&&e in r)&&De(r[e],t)};var Po=function(t){return Eo(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&To(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})},Co=Po(function(t,e,r){ho(t,e,r)});W(W.S+W.F*!M,"Object",{defineProperties:it});var No=w.Object,xo=function(t,e){return No.defineProperties(t,e)},ko=_.Reflect,Ao=ko&&ko.ownKeys||function(t){var e=Gt.f(R(t)),r=It.f;return r?e.concat(r(t)):e},Lo=function(t,e,r){e in t?K.f(t,e,J(0,r)):t[e]=r};W(W.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=s(t),o=Wt.f,i=Ao(n),a={},u=0;i.length>u;)void 0!==(r=o(n,e=i[u++]))&&Lo(a,e,r);return a}});var Fo=w.Object.getOwnPropertyDescriptors,Ro=Wt.f;$("getOwnPropertyDescriptor",function(){return function(t,e){return Ro(s(t),e)}});var qo=w.Object,Mo=function(t,e){return qo.getOwnPropertyDescriptor(t,e)},Io=w.Object.getOwnPropertySymbols,zo="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Do="["+zo+"]",Uo=RegExp("^"+Do+Do+"*"),Go=RegExp(Do+Do+"*$"),Ho=function(t,e,r){var n={},o=q(function(){return!!zo[t]()||"​"!="​"[t]()}),i=n[t]=o?e(Ko):zo[t];r&&(n[r]=i),W(W.P+W.F*o,"String",n)},Ko=Ho.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(Uo,"")),2&e&&(t=t.replace(Go,"")),t},Jo=Ho,Bo=_.parseInt,Vo=Jo.trim,Wo=/^[-+]?0[xX]/,$o=8!==Bo(zo+"08")||22!==Bo(zo+"0x16")?function(t,e){var r=Vo(String(t),3);return Bo(r,e>>>0||(Wo.test(r)?16:10))}:Bo;W(W.G+W.F*(parseInt!=$o),{parseInt:$o});var Zo=w.parseInt;var Yo=function(t,e,r){return e in t?Q(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t};W(W.S,"Array",{isArray:Dt});var Qo=w.Array.isArray,Xo=mn(Object.keys,Object),ti=Object.prototype.hasOwnProperty;var ei=function(t){if(!On(t))return Xo(t);var e=[];for(var r in Object(t))ti.call(t,r)&&"constructor"!=r&&e.push(r);return e};var ri=function(t){return Fn(t)?ao(t):ei(t)},ni=Object.prototype.hasOwnProperty,oi=Po(function(t,e){if(On(e)||Fn(e))to(e,ri(e),t);else for(var r in e)ni.call(e,r)&&Xn(t,r,e[r])});function ii(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(!r)throw new Error("arguments[2](schema) is not defined!");if(!e||Qo(e)&&!e.length)return e;var n={object:function(){!function(t,e,r){var n=Z(e),o=r.properties,i=Z(o);0>=n.length||(-1<i.indexOf("any")?n.forEach(function(r){var i=r,a=e[i],u=ai(ui(a));if("object"===u||"array"===u){if(!o.any.properties&&!o.any.items)throw new Error("object array has not sub");return t[r]={},"array"===u&&(t[r]=[]),ii(t[r],a,o.any)}-1<n.indexOf(i)&&(t[r]=a)}):i.forEach(function(r){var i=o[r].serverName,a=e[i],u=ai(ui(a));if(null===a)return t[r]=a,!0;if(o[r].type!==u)throw new Error("server data [".concat(i,"] type not equal jsonSchema [").concat(r,"] type"));if("object"===u||"array"===u){if(!o[r].properties&&!o[r].items)throw new Error("object array has not sub");return t[r]={},"array"===u&&(t[r]=[]),ii(t[r],a,o[r])}-1<n.indexOf(i)&&(t[r]=a)}))}(t,e,r)},array:function(){!function(t,e,r){var n=r.items,o=n.type;e.forEach(function(e,r){var i=ai(ui(e));if(t[r]||("array"===i&&(t[r]=[]),"object"===i&&(t[r]={})),null===e)return t[r]=e,!0;if("none"===i)throw new Error("api key type error");if(o!==i)throw new Error("api key type not match schema key type");return"object"===i||"array"===i?ii(t[r],e,n):void("other"===o&&(t[r]=e))})}(t,e,r)}}[ai(ui(e))];"function"==typeof n&&n()}function ai(t){var e={object:"object",array:"array",other:"other"}[t];return e||(e=function(t){return!!(-1<["number","string","boolean"].indexOf(t))&&"other"}(t)),e||"none"}function ui(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var ci=Rt.onFreeze;$("seal",function(t){return function(e){return t&&F(e)?t(ci(e)):e}});var fi=w.Object.seal;$("getOwnPropertyNames",function(){return Bt.f});var si,pi=w.Object,li=function(t){return pi.getOwnPropertyNames(t)},di=null;function hi(t){return!!t&&("object"==Pe(t)||"function"==typeof t)}(si=function(t,e){if(!hi(t)||!hi(e))throw new TypeError("Cannot create proxy with a non-object as target or handler");var r=function(){};di=function(){r=function(t){throw new TypeError("Cannot perform '".concat(t,"' on a proxy that has been revoked"))}};var n=e;for(var o in e={get:null,set:null,apply:null,construct:null},n){if(!(o in e))throw new TypeError("nProxy polyfill does not support trap '".concat(o,"'"));e[o]=n[o]}"function"==typeof n&&(e.apply=n.apply.bind(n));var i=this,a=!1,u="function"==typeof t;(e.apply||e.construct||u)&&(i=function(){var n=this&&this.constructor===i,o=Array.prototype.slice.call(arguments);if(r(n?"construct":"apply"),n&&e.construct)return e.construct.call(this,t,o);if(!n&&e.apply)return e.apply(t,this,o);if(u){if(n){o.unshift(t);var a=t.bind.apply(t,o);return new a}return t.apply(this,o)}throw new TypeError(n?"not a constructor":"not a function")},a=!0);var c=e.get?function(t){return r("get"),e.get(this,t,i)}:function(t){return r("get"),this[t]},f=e.set?function(t,n){r("set");e.set(this,t,n,i)}:function(t,e){r("set"),this[t]=e},s=li(t),p={};s.forEach(function(e){if(!(a&&e in i)){var r={enumerable:!!Mo(t,e).enumerable,get:c.bind(t,e),set:f.bind(t,e)};Q(i,e,r),p[e]=!0}});var l=!0;if(Le?Le(i,xe(t)):i.__proto__?i.__proto__=t.__proto__:l=!1,e.get||!l)for(var d in t)p[d]||Q(i,d,{get:c.bind(t,d)});return fi(t),fi(i),i}).revocable=si.revocable=function(t,e){return{proxy:new si(t,e),revoke:di}};var vi="undefined"==typeof Proxy?si:Proxy,yi={url:"",method:"get",params:{},data:{},headers:{},timeout:1e3},bi={aliapp:function(e){return new t(function(t,r){var n=e.data,o=Qo(n)?[]:{},i=e.headers,a="";Z(i).forEach(function(t){"content-type"===t.toLowerCase()&&(a=i[t])}),"application/json"===a.toLowerCase()?o=tt(n):Z(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?tt(n[t]):n[t]});var u={url:"".concat(e.url).concat(e.qs?"?".concat(e.qs):""),data:o,headers:e.headers,method:e.method,timeout:e.timeout,success:function(e){t({data:e.data,headers:e.headers,status:e.status,statusText:""})},fail:function(t){r(t)}};"GET"===e.method.toUpperCase()&&delete u.data,gi(e,my.request(u))})},weapp:function(e){return new t(function(t,r){var n=e.data,o=Qo(n)?[]:{},i=e.headers,a="";Z(i).forEach(function(t){"content-type"===t.toLowerCase()&&(a=i[t])}),"application/x-www-form-urlencoded"===a.toLowerCase()?Z(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?tt(n[t]):n[t]}):o=n;var u={url:"".concat(e.url).concat(e.qs?"?".concat(e.qs):""),data:o,header:e.headers,method:e.method,success:function(e){200!=e.statusCode&&(e.data={retcode:5e3,info:{errCode:e.statusCode,msg:e.data,tip:e.data},data:{}}),t({data:e.data,headers:e.header,status:e.statusCode,statusText:""})},fail:function(t){r(t)},complete:function(){}};"GET"===e.method.toUpperCase()&&delete u.data,gi(e,wx.request(u))})},swan:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return new t(function(t,r){var n=e.data,o=Qo(n)?[]:{},i=e.headers,a="";Z(i).forEach(function(t){"content-type"===t.toLowerCase()&&(a=i[t])}),"application/x-www-form-urlencoded"===a.toLowerCase()?Z(n).forEach(function(t){o[t]="object"===n[t].toString().slice(1,7).toLowerCase()?tt(n[t]):n[t]}):o=n;var u={url:"".concat(e.url).concat(e.qs?"?".concat(e.qs):""),data:o,header:e.headers,method:e.method,success:function(e){200!=e.statusCode&&(e.data={retcode:5e3,info:{errCode:e.statusCode,msg:e.data,tip:e.data},data:{}}),t({data:e.data,headers:e.header,status:e.statusCode,statusText:""})},fail:function(t){r(t)},complete:function(){}};"GET"===e.method.toUpperCase()&&delete u.data,gi(e,swan.request(u))})})};function gi(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;t&&t.getRequestTask&&"function"==typeof t.getRequestTask&&t.getRequestTask(e)}function mi(t,e){var r=Z(t);return Io&&r.push.apply(r,Io(t)),e&&(r=r.filter(function(e){return Mo(t,e).enumerable})),r}function wi(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?mi(e,!0).forEach(function(r){Yo(t,r,e[r])}):Fo?xo(t,Fo(e)):mi(e).forEach(function(r){Q(t,r,Mo(e,r))});return t}var _i={OK:"FE-200",PARAM:"FE-5000",OTHER:"FE-5001",CATCH:"FE-5002"};function Oi(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=r,a=Qo(r);return a||(i=Z(r)),o=this||o,i.forEach(function(i){var u,c,f=a?i.name:i,s=a?i:r[i];if(s.name=f,!f)throw new Error("Function name is required!");if(o[f])throw new Error("Duplicate statements in _this: ".concat(f));o[f]=(u=s,function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new vi(e,{get:function(t,e){return r[e]},set:function(){throw new Error("The property is readonly!")},apply:function(e,n,o){return new t(function(t,i){function a(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};return function(t,e){return!(isNaN(t)||isNaN(e)||(t=Zo(t),e=Zo(e),0>=t||0>=e))}(r,e)&&p<=e?setTimeout(function(){n(t>e)},r):void n(!0)}var u=r,c=u.interval,f=r,s=f.retryTimes,p=0;!function o(u){++p,e(u||{},r,function(e,f){var l=e.data;if(r=Co(r,{headers:f.headers,timeout:f.timeout,fnName:f.fnName}),f.err)return n.emit("cnfapi:res:reject",{fnName:f.fnName,retcode:f.err.retcode,msg:f.err.msg,headers:r.headers}),i({retcode:f.err.retcode,msg:f.err.msg,headers:r.headers});if(e.retcode!==_i.OK)return n.emit("cnfapi:res:reject",{fnName:f.fnName,retcode:e.retcode,msg:e.errMsg,headers:r.headers}),i({retcode:e.retcode,msg:e.errMsg,headers:r.headers});var d=r.url;f.restful&&(d=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=/\{(.+?)\}/g,n=null;do{(n=r.exec(t))&&1<n.length&&(t=t.replace(n[0],e[n[1]]||""))}while(n);return t}(d,f.restful)),n.emit("cnfapi:req:before",{fnName:f.fnName,url:d,timeout:r.timeout,env:r.env,method:r.method,headers:r.headers,data:l.postData,qs:l.qs,params:l.getData,getRequestTask:f.getRequestTask}),function(t){if("function"!=typeof bi[t.env])throw new Error("http env error!");return bi[t.env](oi(yi,t))}({url:d,timeout:r.timeout,env:r.env,method:r.method,headers:r.headers,data:l.postData,qs:l.qs,params:l.getData,getRequestTask:f.getRequestTask}).then(function(e){var a=e.data;r.status=e.status,r.statusText=e.statusText;var c="function"==typeof f.openResInterceptor&&f.openResInterceptor.call(r,a);if(c&&p<s+(s?1:2))return f.resInterceptor.call(r,a,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t)return n.emit("cnfapi:res:reject",wi({fnName:f.fnName},t)),i(t);var r=Co(u.data,e.data),a=Co(f.headers,e.headers);u.data=r,f.headers=a,o(u)});if("function"==typeof f.resSuccessCallback)return f.resSuccessCallback(a,function(o,a){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200;return o?(n.emit("cnfapi:res:reject",wi({fnName:f.fnName},o||Pi({retcode:500,headers:e.headers}))),void i(o||Pi({retcode:500,headers:e.headers}))):(p=0,Ni(r.model)||(a=Ci(r.model,a)),n.emit("cnfapi:res:resolve",wi({fnName:f.fnName},Ti({data:a,headers:e.headers,retcode:u}))),t(Ti({data:a,headers:e.headers,retcode:u})))});if(/^2\d/.test(+a.retcode)){p=0;var l=a.data;return Ni(r.model)||(l=Ci(r.model,l)),n.emit("cnfapi:res:resolve",wi({fnName:f.fnName},Ti({data:l,headers:e.headers,retcode:a.retcode}))),t(Ti({data:l,headers:e.headers,retcode:a.retcode}))}n.emit("cnfapi:res:reject",wi({fnName:f.fnName},Pi({retcode:a.retcode,msg:a.msg,headers:e.headers}))),i(Pi({retcode:a.retcode,msg:a.msg,headers:e.headers}))},function(t){var e=tt(t);return e.toLowerCase().includes("abort")?(n.emit("cnfapi:res:reject",wi({fnName:f.fnName},Pi({retcode:_i.OTHER,msg:"error"===xi(t)?t.toString():tt(t)}))),i(Pi({retcode:_i.OTHER,msg:"error"===xi(t)?t.toString():tt(t)}))):void a(p,s,c,function(e){return e?(p=0,n.emit("cnfapi:res:reject",wi({fnName:f.fnName},Pi({retcode:_i.OTHER,msg:"error"===xi(t)?t.toString():tt(t)}))),i(Pi({retcode:_i.OTHER,msg:"error"===xi(t)?t.toString():tt(t)}))):void o(u)})}).catch(function(t){p=0,n.emit("cnfapi:res:catch",wi({fnName:f.fnName},Pi({retcode:_i.CATCH,msg:"error"===xi(t)?t.toString():tt(t)}))),i(Pi({retcode:_i.CATCH,msg:"error"===xi(t)?t.toString():tt(t)}))})})}(o[0]||{})})}})}(c=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};return t.fnName=f,t.openResInterceptor=t.openResInterceptor||n.openResInterceptor,t.resInterceptor=t.resInterceptor||n.resInterceptor,t.resSuccessCallback=t.resSuccessCallback||n.resSuccessCallback,o._before=o._before||n._before,e.url=t.url||e.url,"function"==typeof o._before?o._before(t,e,function(n){Si((t=Co(t,n)).data||{},e.params,function(e){r(e,t)})}):void Si(t.data||{},e.params,function(e){r(e,t)})},JSON.parse(tt(function(t,r,n){var o,i={url:"",baseURL:r.baseURL,env:r.env,headers:r.headers,timeout:r.timeout,method:t.method||r.method,model:t.resSchema||{},interval:t.interval||0,retryTimes:t.retryTimes||0,pathname:Ei(t.apiName),params:ji(t.params),fnName:t.name,signKey:t.signKey,status:"",statusText:""},a=e(t.apiName);return i.url=i.baseURL+i.pathname,o=t.apiName,(/^((http:\/\/)|(https:\/\/)|(:\/\/))/.test(o)||/^(localhost)/.test(o))&&(i=oi(i,{baseURL:a.origin,pathname:Ei(a.pathname),url:a.href})),Z(i).forEach(function(t){if(n[t])throw new Error("Duplicate statements in proxy Function: ".concat(t));n[t]=i[t]}),Co({},t,i)}(u,n,c))))),s=null}),o}function ji(t){function e(t,e){return{required:!!t.isNeed,method:e.toUpperCase()}}var r={},n=t.get||t.GET||[],o=t.post||t.POST||[];return n.forEach(function(t){r[t.param]=e(t,"GET")}),o.forEach(function(t){r[t.param]=e(t,"POST")}),r}function Si(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};setTimeout(function(){var n={retcode:"FE-5000",errMsg:"",data:{}},o=[],i={},a={};Z(e).every(function(r){var u=e[r],c=u.method,f=u.required,s=t[r],p=function(t,e,r){return r&&null==t?{result:!1,errMsg:"param: ".concat(e,". Is Required!")}:{result:!0,errMsg:""}}(s,r,f);return p.result?!(void 0!==s&&null!=s&&("GET"===c.toUpperCase()?(i[r]=s,o.push("".concat(r,"=").concat(encodeURIComponent(s)))):a[r]=s,0)):(n.errMsg=p.errMsg,!1)})?(n.retcode=_i.OK,n.data={qs:o.join("&"),postData:a,getData:i}):n.retcode=_i.PARAM,r(n)},0)}function Ei(t){return/^\//.test(t)?t:"/".concat(t)}function Ti(t){return{data:t.data,headers:t.headers,retcode:t.retcode}}function Pi(t){return{retcode:t.retcode||"FE-5001",msg:t.msg||"unknown",headers:t.headers||{}}}function Ci(t,e){var r=Qo(e)?[]:{};return ii(r,e,t),r}function Ni(t){return!t||!Z(t).length}function xi(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}return function(t){function e(){var t,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};et(this,e);var o=(t=Ne(this,Fe(e).call(this))).getType(n);if("object"!==t.getType(r)||"object"!==o&&"array"!==o)throw new Error("constructor params require Object type");var i=JSON.parse(tt(n));return t.merge=Co,t.outConf=r,Q(Ce(t),"apiList",{get:function(){return i}}),t.init(),t}return Ie(e,r),nt(e,[{key:"init",value:function(){this.mergeConf(this.initConf,this.outConf),Oi.apply(this,[JSON.parse(tt(this.apiList)),this.defaultOpts])}},{key:"mergeConf",value:function(t,e){var r=this,n={};if("object"!==this.getType(t)||"object"!==this.getType(e))throw new Error("mergeConf argument Not Object");return Z(t).forEach(function(o){var i=t[o],a=null,u=t[o].vaildFn,c="function"==typeof t[o].default&&t[o].default.apply(r)||"";if(i.required&&!c&&!e[o])throw new Error("".concat(i.errMsg));if(n[o]=e[o]||c,"function"==typeof u&&(a=u(n[o])),null!=a&&!a.result)throw new Error("".concat(a.errMsg))}),n}},{key:"openResInterceptor",value:function(){return this.conf.openResInterceptor.apply(this,arguments)}},{key:"_before",value:function(t,e){e(t)}},{key:"getType",value:function(t){return function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}(t)}},{key:"conf",get:function(){return this.mergeConf(this.initConf,this.outConf)}},{key:"initConf",get:function(){return{baseURL:{required:!0,errMsg:"baseURL is required",vaildFn:function(t){return{result:/^((http:\/\/)|(https:\/\/)|(:\/\/))([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}(\/)?/.test(t)||/^((http:\/\/)|(https:\/\/)|(:\/\/))(localhost)/.test(t),errMsg:"invalid baseURL"}}},timeout:{required:!0,errMsg:"timeout is required or not 0",default:function(){return 3e3},vaildFn:function(t){return{result:!isNaN(t)&&0!=t,errMsg:"invalid timeout"}}},env:{required:!0,errMsg:"invalid env",default:function(){return"browser"},vaildFn:function(t){var e={result:-1<["browser","aliapp","weapp","swan"].indexOf(t),errMsg:'invalid env, env must in ["browser", "aliapp" ,"weapp", "swan"]'};return("aliapp"===t||"weapp"===t)&&(window=void 0,document=void 0),"browser"===t&&(e={result:window&&document&&"undefined"!=typeof window&&"undefined"!=typeof document,errMsg:'invalid env, env not in browser, env must in ["browser", "aliapp" ,"weapp", "swan"]'}),e}},openResInterceptor:{required:!1,default:function(){return function(){return!1}}},resInterceptor:{required:!1,default:function(){return function(){}}},resSuccessCallback:{required:!1,default:function(){return function(t,e){e(!1,t)}}},resFormat:{description:"接口返回格式",required:!1,default:function(){return{type:"object",properties:{retcode:{type:"string"},msg:{type:"string"},data:{type:"object"}}}}}}}},{key:"defaultOpts",get:function(){return this.merge({method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},this.outConf,this.conf)}}]),e}()});
//# sourceMappingURL=cnfapi-miniprogram.common.js.map
